\documentclass{article}
\usepackage[utf8]{inputenc}

\newcommand{\nirpdftitle}{Abelian Extensions}
\usepackage{import}
\inputfrom{../notes}{nir}
\numberwithin{equation}{section}

\pagestyle{contentpage}

\title{Classifying Extensions of Abelian Groups}
\author{Nir Elber}
\date{\today}
\usepackage{graphicx}
\lhead{}
\rhead{\textit{ABELIAN EXTENSIONS}}

\begin{document}

\maketitle

\begin{abstract}
	\noindent We use group cohomology to provide some general theory to classify all group extensions of a $\Gamma$-module $A$ in the case of an abelian group $\Gamma$. The main idea is to provide a group presentation of the extension using specially chosen elements of $A$.
\end{abstract}

\setcounter{tocdepth}{4}
\tableofcontents

\section{General Group Extensions} \label{sec:general}
Throughout this section, $\Gamma$ will be a finite group and $A$ will be a $\Gamma$-module; we will write the group operation of $A$ and the group action of $\Gamma$ on $A$ multiplicatively. To sketch the idea here, begin with an extension
\[1\to A\to\mc E\stackrel\pi\to\Gamma\to1.\]
We know that we can abstractly represent $\mc E$ as the set $A\times\Gamma$ with some group law dictated by a $2$-cocycle in $H^2(G,A)$, so we expect that $\mc E$ can be presented by $A$ and a choice of lifts from $\Gamma$, with some specially chosen relations.

Here are some basic observations realizing this idea. We start by lifting a single element of $\Gamma$.
\begin{lemma} \label{lem:constructalpha}
	Let $A$ be a $\Gamma$-module, and let 
	\[1\to A\to\mc E\stackrel\pi\to\Gamma\to1\]
	denote a group extension. Further, fix some $\sigma\in\Gamma$ of order $n_\sigma$, and find $F\in\mc E$ such that $\sigma\coloneqq\pi(F)$. Then
	\[\alpha\coloneqq F^{n_\sigma}\]
	has $\alpha\in A^{\langle\sigma\rangle}$.
\end{lemma}
\begin{proof}
	A priori, we only know that $\alpha\in\mc E$, so we compute
	\[\pi(\alpha)=\pi\left(F^{n_\sigma}\right)=\sigma^{n_\sigma}=1,\]
	so $\alpha\in\ker\pi=A$. Thus, we may say that
	\[\sigma(\alpha)=F\alpha F^{-1}=F^{n_\sigma}=\alpha,\]
	so $\alpha\in A^{\langle\sigma\rangle}$, as desired.
\end{proof}
We can make the above proof more explicit by specifying the group law of $\mc E$.
\begin{lemma} \label{lem:explicitalpha}
	Let $A$ be a $\Gamma$-module. Picking up some $2$-cocycle $c\in Z^2(\Gamma,A)$, let
	\[1\to A\to\mc E\stackrel\pi\to\Gamma\to1\]
	be the corresponding extension. Fixing $\sigma\in\Gamma$ of order $n_\sigma$, let $F\coloneqq(m,\sigma)\in\mc E$ be a lift. Then
	\[\alpha\coloneqq F^{n_\sigma}=N_\sigma(m)\prod_{i=0}^{n_\sigma-1}c\left(\sigma^i,\sigma\right),\]
	where $N_\sigma\coloneqq\sum_{i=0}^{n_\sigma-1}\sigma^i$.
\end{lemma}
\begin{proof}
	This is a direct computation. By induction, we have that
	\[F^k=\left(\prod_{i=0}^{k-1}\sigma^i(m)c\left(\sigma^i,\sigma\right),\sigma^k\right)\]
	for $k\in\NN$. Indeed, there is nothing to say for $k=0$, and the inductive step merely expands out $F^k\cdot F$.

	It follows that
	\[\alpha=F^{n_\sigma}=\left(\prod_{i=0}^{n_\sigma-1}\sigma^i(m)\cdot\prod_{i=0}^{n_\sigma-1}c\left(\sigma^i,\sigma\right),1\right),\]
	which is what we wanted.
\end{proof}
Having this explicit formula lets us say how $\alpha$ changes as we vary the lift.
\begin{prop} \label{prop:findallalpha}
	Let $A$ be a $\Gamma$-module. Fixing a cohomology class $u\in H^2(\Gamma,A)$, let 
	\[1\to A\to\mc E\stackrel\pi\to\Gamma\to1\]
	be a group extension whose isomorphism class corresponds to $u$. Further, fix some $\sigma\in\Gamma$ of order $n_\sigma$, and let $A_\sigma\coloneqq A^{\langle\sigma\rangle}$ be the fixed submodule. Then the set
	\[S_{\mc E,\sigma}\coloneqq\left\{F^{n_\sigma}:\pi(F)=\sigma\right\}\]
	is an equivalence class in $A_\sigma/N_\sigma(A)$, independent of the choice of $\mc E$. Again, $N_\sigma\coloneqq\sum_{i=1}^{n_\sigma-1}\sigma^i$.
\end{prop}
\begin{proof}
	Note that $S_{\mc E,\sigma}\subseteq A_\sigma$ already from \autoref{lem:constructalpha}.
	
	The point is to use \autoref{lem:explicitalpha}. Note the extension $\mc E$ corresponds to the equivalence class $u\in H^2(\Gamma,A)$, so let $c\in Z^2(\Gamma,A)$ be a representative. Letting $\mc E_c$ be the extension constructed from $c$, we are promised an isomorphism $\varphi\colon\mc E\simeq\mc E_c$ making the following diagram commute.
	% https://q.uiver.app/?q=WzAsMTAsWzAsMCwiMSJdLFsxLDAsIkxeXFx0aW1lcyJdLFsyLDAsIlxcbWMgRSJdLFszLDAsIlxcR2FtbWEiXSxbNCwwLCIxIl0sWzAsMSwiMSJdLFsxLDEsIkxeXFx0aW1lcyJdLFsyLDEsIlxcbWMgRV9jIl0sWzMsMSwiXFxHYW1tYSJdLFs0LDEsIjEiXSxbMCwxXSxbMSwyXSxbMiwzLCJcXHBpIl0sWzMsNF0sWzUsNl0sWzYsN10sWzcsOCwiXFxwaV9jIl0sWzgsOV0sWzIsNywiXFx2YXJwaGkiXSxbMSw2LCIiLDEseyJsZXZlbCI6Miwic3R5bGUiOnsiaGVhZCI6eyJuYW1lIjoibm9uZSJ9fX1dLFszLDgsIiIsMSx7ImxldmVsIjoyLCJzdHlsZSI6eyJoZWFkIjp7Im5hbWUiOiJub25lIn19fV1d&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	\[\begin{tikzcd}
		1 & {A} & {\mc E} & \Gamma & 1 \\
		1 & {A} & {\mc E_c} & \Gamma & 1
		\arrow[from=1-1, to=1-2]
		\arrow[from=1-2, to=1-3]
		\arrow["\pi", from=1-3, to=1-4]
		\arrow[from=1-4, to=1-5]
		\arrow[from=2-1, to=2-2]
		\arrow[from=2-2, to=2-3]
		\arrow["{\pi_c}", from=2-3, to=2-4]
		\arrow[from=2-4, to=2-5]
		\arrow["\varphi", from=1-3, to=2-3]
		\arrow[Rightarrow, no head, from=1-2, to=2-2]
		\arrow[Rightarrow, no head, from=1-4, to=2-4]
	\end{tikzcd}\]
	We start by claiming that $S_{\mc E,\sigma}=S_{\mc E_c,\sigma}$, which will show that $S_{\mc E,\sigma}$ is independent of the choice of representative $\mc E$. To show $S_{\mc E,\sigma}\subseteq S_{\mc E_c,\sigma}$, note that $\alpha\in S_{\mc E,\sigma}$ has $F\in\mc E$ with $\pi(F)=\sigma$ and $\alpha=F^{n_\sigma}$. Pushing this through $\varphi$, we see $\varphi(F)\in\mc E_c$ has
	\[\pi_c(\varphi(F))=\varphi(\pi(F))=\sigma\qquad\text{and}\qquad\varphi(F)^{n_\sigma}=\varphi(F^{n_\sigma})=\alpha,\]
	so $\alpha\in S_{\mc E_c,\sigma}$ follows. An analogous argument with $\varphi^{-1}$ shows the other needed inclusion.

	It thus suffices to show that $S_{\mc E_c,\sigma}$ is an equivalence class in $A_\sigma/N_\sigma(A)$. However, this is exactly what \autoref{lem:explicitalpha} says as we let the possible lifts $F=(m,\sigma)\in\mc E_c$ of $\sigma$ vary over $m\in A$.
\end{proof}
The fact that we are taking elements of $\Gamma$ to equivalence classes in $A_\sigma^\times/N_\sigma\left(A\right)$ is reminiscent of the (inverse) Artin reciprocity map, and indeed that is exactly what is going on.
\begin{cor} \label{cor:alphaiscupproduct}
	Work in the context of \autoref{prop:findallalpha}. Then
	\[S_\sigma\coloneqq S_{\mc E,\sigma}=[\sigma]\cup[c],\]
	where $\cup\colon\widehat H^{-2}(\Gamma,A)\times\widehat H^2(\Gamma,A)\to\widehat H^0(\Gamma,A)$ is the cup product in Tate cohomology.
\end{cor}
\begin{proof}
	Using notation as in the proof of \autoref{prop:findallalpha}, we recall that $S_\sigma=S_{\mc E_c,\sigma}$, so it suffices to prove the result for $\mc E_c$. Well, by \autoref{lem:explicitalpha}, $S_\sigma$ is represented by
	\[\prod_{i=0}^{n_\sigma-1}c\left(\sigma^i,\sigma\right).\]
	However, this product is exactly the cup product $[\sigma]\cup[c]$.
\end{proof}
\begin{cor}
	Let $L/K$ be a finite Galois extension of local fields with Galois group $\Gamma\coloneqq\op{Gal}(L/K)$. Further, let
	\[1\to L^\times\to\mc E\stackrel\pi\to\Gamma\to1\]
	be an $L/K$-gerb bound by $\mathbb G_m$ whose isomorphism class corresponds to the fundamental class $u_{L/K}\in H^2(\Gamma,L^\times)$. Further, fix some $\sigma\in\Gamma$ of order $n_\sigma$, and let $L_\sigma\coloneqq L^{\langle\sigma\rangle}$ be the fixed field. Then
	\[\theta_{L/L_\sigma}^{-1}(\sigma)=\left\{F^{n_\sigma}:\pi(F)=\sigma\right\}.\]
\end{cor}
\begin{proof}
	Recalling $\theta_{L/L_\sigma}^{-1}$ is a cup product map, note that $\theta_{L/L_\sigma}^{-1}(\sigma)$ is given by $[\sigma]\cup u_{L/K}$. So we are done by \autoref{cor:alphaiscupproduct}.
\end{proof}
The above results are all interested in lifting single elements of $\Gamma$ and studying how they behave on their own. In the discussion that follows, we will need to study how the lifts interact with each other, but for now, we will justify why lifts are adequate to study as follows.
\begin{proposition} \label{prop:liftsgenerate}
	Let $A$ be a $\Gamma$-module. Further, let
	\[1\to A\to\mc E\stackrel\pi\to\Gamma\to1\]
	be a group extension. Given elements $\{\sigma_i\}_{i=1}^m$ which generate $\Gamma$, then $\mc E$ is generated by $A$ and a set of lifts $\{F_i\}_{i=1}^m$ with $\pi(F_i)=\sigma_i$ for each $i$.
\end{proposition}
\begin{proof}
	Fix some element $e\in\mc E$, which we need to exhibit as a product of elements in $A$ and $F_i$s. Well, because the $\sigma_i$ generate $\Gamma$, we know that $\pi(e)\in\Gamma$ can be written as
	\[\pi(e)=\prod_{i=1}^m\sigma_i^{a_i}\]
	for some sequence of integers $\{a_i\}_{i=1}^m$. It follows that
	\[\pi\left(\frac e{\prod_{i=1}^mF_i^{a_i}}\right)=1,\]
	so $\frac e{\prod_{i=1}^mF_i^{a_i}}=\ker\pi=A$. Thus, we can find some $x\in A$ such that
	\[e=x\cdot\prod_{i=1}^mF_i^{a_i},\]
	which is what we wanted.
\end{proof}

\section{Abelian Group Extensions}

\subsection{Extensions to Tuples}
The above proofs technically don't even require that the group $\Gamma$ is abelian. If we want to keep track of the fact our group is abelian, we should extract the elements of $A$ which can do so.
\begin{lemma} \label{lem:constructalphabeta}
	Let $A$ be a $\Gamma$-module, and let 
	\[1\to A\to\mc E\stackrel\pi\to\Gamma\to1\]
	be a group extension. Further, fix some $F_1,F_2\in\mc E$ and define $\sigma_i\coloneqq\pi(F_i)$ for $i\in\{1,2\}$, and let $\sigma_i\in\Gamma$ have order $n_i$. Then, setting
	\[\alpha_i\coloneqq F_i^{n_i}\qquad\text{and}\qquad\beta\coloneqq F_1F_2F_1^{-1}F_2^{-1},\]
	we have the following.
	\begin{listalph}
		\item $\alpha_i\in A^{\langle\sigma_i\rangle}$ for $i\in\{1,2\}$ and $\beta\in A$.
		\item $N_1(\beta)=\alpha_1/\sigma_2(\alpha_1)$ and $N_2(\beta^{-1})=\alpha_2/\sigma_1(\alpha_2)$, where $N_i\coloneqq\sum_{p=0}^{n_i-1}\sigma_i^p$.
	\end{listalph}
\end{lemma}
\begin{proof}
	These checks are a matter of force. For brevity, we set $A_i\coloneqq A^{\langle\sigma_i\rangle}$ for $i\in\{1,2\}$.
	\begin{listalph}
		\item That $\alpha_i\in A_i$ follows from \autoref{lem:constructalpha}. Lastly, $\beta\in A$ follows from noting
		\[\pi(\beta)=\pi(F_1)\pi(F_2)\pi(F_1)^{-1}\pi(F_2)^{-1}=1,\]
		so $\beta\in\ker\pi=A$.
		\item We will check that $\op N_{L/L_1}(\beta)=\alpha_1/\sigma_2(\alpha_1)$; the other equality follows symmetrically after switching $1$s and $2$s because $\beta^{-1}=F_2F_1F_2^{-1}F_1^{-1}$. Well, we compute
		\begin{align*}
			N_1(\beta) &= \sigma_1^{-1}(\beta)\cdot\sigma_1^{-2}(\beta)\cdot\sigma^{-3}\cdot\ldots\cdot\sigma^{-n_1}(\beta) \\
			&= F_1^{-1}\left(F_1F_2F_1^{-1}F_2^{-1}\right)F_1 \\
			&\phantom{{}={}}\cdot F_1^{-2}\left(F_1F_2F_1^{-1}F_2^{-1}\right)F_1^2 \\
			&\phantom{{}={}}\cdot F_1^{-3}\left(F_1F_2F_1^{-1}F_2^{-1}\right)F_1^3\cdot\ldots \\
			&\phantom{{}={}}\cdot F_1^{-n_1}(F_1F_2F_1^{-1}F_2^{-1})F_1^{n_1} \\
			% &= F_2F_1^{-1}F_2^{-1} \\
			% &\phantom{{}={}}\cdot F_2F_1^{-1}F_2^{-1} \\
			% &\phantom{{}={}}\cdot F_2F_1^{-1}F_2^{-1}\cdot\ldots \\
			% &\phantom{{}={}}\cdot F_2F_1^{-1}F_2^{-1}F_1^{n_1} \\
			&= F_2F_1^{-1} \\
			&\phantom{{}={}}\cdot F_1^{-1} \\
			&\phantom{{}={}}\cdot F_1^{-1}\cdot\ldots \\
			&\phantom{{}={}}\cdot F_1^{-1}F_2^{-1}F_1^{n_1} \\
			&= F_2F_1^{-n_1}F_2^{-1}F_1^{n_1} \\
			&= \alpha_1/\sigma_2(\alpha_1).
		\end{align*}
	\end{listalph}
	The above computations finish the proof.
\end{proof}
The proof of (b) above might appear magical, but in fact it comes from a more general idea.
\begin{lemma} \label{lem:switchtwo}
	Fix everything as in \autoref{lem:constructalphabeta}. Then, for $x,y\ge0$, we have
	\[F_1^xF_2^y=\prod_{k=0}^{x-1}\prod_{\ell=0}^{y-1}\sigma_1^k\sigma_2^\ell(\beta)F_2^yF_1^x.\]
\end{lemma}
\begin{proof}
	We induct. We take a moment to write out the case of $x=1$, for which we induct on $y$. To be explicit, we will prove
	\[F_1F_2^y=\prod_{\ell=0}^{y-1}\sigma_2^\ell(\beta)F_2^yF_1.\]
	For $y=0$, there is nothing to say. So suppose the statement for $y$ (and $x=1$), and we show $y+1$ (and $x=1$). Well, we compute
	\begin{align*}
		F_1F_2^{y+1} &= F_1F_2^y\cdot F_2 \\
		&= \prod_{\ell=0}^{y-1}\sigma_2^\ell(\beta)F_2^yF_1\cdot F_2 \\
		&= \prod_{\ell=0}^{y-1}\sigma_2^\ell(\beta)F_2^y\beta F_2F_1 \\
		&= \prod_{\ell=0}^{y-1}\sigma_2^\ell(\beta)\cdot \sigma_2^y(\beta)F_2^y\cdot F_2F_1 \\
		&= \prod_{\ell=0}^{(y+1)-1}\sigma_2^\ell(\beta)\cdot F_2^{y+1}F_1,
	\end{align*}
	which is what we wanted.
	
	We now move on to the general case. We will induct on $y$. Note that $y=0$ makes the product empty, leaving us with $F_1^x=F_1^x$, for any $x$. So suppose that the statement is true for some $y\ge0$, and we will show $y+1$. For this, we now turn to inducting on $x$. For $x=0$, we note that the product is once again empty, so we are left with showing $F_2^{y+1}=F_2^{y+1}$, which is true.
	
	To finish, we suppose the statement for $x$ and show the statement for $x+1$. Well, we compute
	\begin{align*}
		F_1^{x+1}F_2^{y+1} &= F_1\cdot F_1^xF_2^{y+1} \\
		&= F_1\cdot \prod_{k=0}^{x-1}\prod_{\ell=0}^{(y+1)-1}\sigma_1^k\sigma_2^\ell(\beta)\cdot F_2^{y+1}F_1^x \\
		&= \sigma_1\left(\prod_{k=0}^{x-1}\prod_{\ell=0}^{(y+1)-1}\sigma_1^k\sigma_2^\ell(\beta)\right)\cdot F_1F_2^{y+1}F_1^x \\
		&= \prod_{k=1}^{(x+1)-1}\prod_{\ell=0}^{(y+1)-1}\sigma_1^k\sigma_2^\ell(\beta)\cdot F_1F_2^{y+1}F_1^x \\
		&= \prod_{k=1}^{(x+1)-1}\prod_{\ell=0}^{(y+1)-1}\sigma_1^k\sigma_2^\ell(\beta)\cdot \prod_{\ell=0}^{(y+1)-1}\sigma_2^\ell(\beta)\cdot \sigma_2^y(\beta)\cdot F_2^{y+1}F_1\cdot F_1^x \\
		&= \prod_{k=0}^{(x+1)-1}\prod_{\ell=0}^{(y+1)-1}\sigma_1^k\sigma_2^\ell(\beta)F_2^{y+1}F_1^{x+1},
	\end{align*}
	which is what we wanted.
\end{proof}
\begin{remark} \label{rem:alphabetarelation}
	Setting $x=n_1$ and $y=1$ recovers $\op N_{L/L^{\langle\sigma_1\rangle}}(\beta)=\alpha_1/\sigma_2(\alpha_1)$.
\end{remark}
In particular, \autoref{rem:alphabetarelation} tells us that coherence of the group law in $\mc E$ should give rise to relations between our elements of $A$. Here is a more complex example.
\begin{lemma} \label{lem:betarelations}
	Let $A$ be a $\Gamma$-module, and let 
	\[1\to A\to\mc E\stackrel\pi\to\Gamma\to1\]
	be a group extension. Further, fix some $F_1,F_2,F_3\in\mc E$ and define $\sigma_i\coloneqq\pi(F_i)$ for $i\in\{1,2,3\}$, and let $\sigma_i\in\Gamma$ have order $n_i$. Then, setting
	\[\beta_{ij}\coloneqq F_iF_jF_i^{-1}F_j^{-1}\]
	for each pair of indices $(i,j)$ with $i>j$. Then
	\[\frac{\sigma_2(\beta_{31})}{\beta_{31}}=\frac{\sigma_1(\beta_{32})}{\beta_{32}}\cdot\frac{\sigma_3(\beta_{21})}{\beta_{21}}.\]
\end{lemma}
\begin{proof}
	The point is to turn $F_3F_2F_1$ into $F_1F_2F_3$ in two different ways. On one hand,
	\begin{align*}
		(F_3F_2)F_1 &= \beta_{32}F_2F_3F_1 \\
		&= \beta_{32}F_2\beta_{31}F_1F_3 \\
		&= \beta_{32}\sigma_2(\beta_{31})(F_2F_1)F_3 \\
		&= \beta_{32}\sigma_2(\beta_{31})\beta_{21}F_1F_2F_3.
	\end{align*}
	On the other hand,
	\begin{align*}
		F_3(F_2F_1) &= F_3\beta_{21}F_1F_2 \\
		&= \sigma_3(\beta_{21})(F_3F_1)F_2 \\
		&= \sigma_3(\beta_{21})\beta_{31}F_1(F_3F_2) \\
		&= \sigma_3(\beta_{21})\beta_{31}F_1\beta_{32}F_2F_3 \\
		&= \sigma_3(\beta_{21})\beta_{31}\sigma_1(\beta_{32})F_1F_2F_3.
	\end{align*}
	Thus,
	\[\beta_{32}\sigma_2(\beta_{31})\beta_{21}=\sigma_3(\beta_{21})\beta_{31}\sigma_1(\beta_{32}),\]
	which rearranges into the desired equation.
\end{proof}
\begin{remark}
	The relation from \autoref{lem:betarelations} may look asymmetric in the $\beta_{ij}$, but this is because the definitions of the $\beta_{ij}$s themselves are asymmetric in $F_i$.
\end{remark}

\subsection{Tuples to Cocycles}
\subsubsection{The Set-Up}
The proceeding lemma is intended to give intuition that the element $\beta$ is helping to specify the group law on $\mc E$.

More concretely, we will take the following set-up for the following results: fix a $\Gamma$-module $A$, and let
\[1\to A\to\mc E\to\Gamma\to1\]
be a group extension. Once we choose elements $\{\sigma_i\}_{i=1}^m$ generating $\Gamma$, we know by \autoref{prop:liftsgenerate} that we can generate $\mc E$ by $A$ and some arbitrarily chosen lifts $\{F_i\}_{i=1}^m$ of the $\{\sigma_i\}_{i=1}^m$. Then, letting $n_i$ be the order of $\sigma_i$, we set
\[\alpha_i\coloneqq F_i^{n_i}\]
for each index $i$ and
\[\beta_{ij}\coloneqq F_iF_jF_i^{-1}F_j^{-1}\]
for each index $1\le j<i\le m$. Notably, we will not need more $\beta$s: indeed, $\beta_{ii}=1$ and $\beta_{ij}=\beta_{ji}^{-1}$ for any $i$ and $j$. Setting $A_i\coloneqq A^{\langle\sigma_i\rangle}$ and $N_i\coloneqq\sum_{p=0}^{n_i-1}\sigma_i^p$, the story so far is that
\begin{equation}
	\alpha_i\in A_i\text{ for each }i\qquad\text{and}\qquad\beta_{ij}\in A\text{ for each }i>j \label{eq:tuplefields}
\end{equation}
and
\begin{equation}
	N_i(\beta_{ij})=\alpha_i/\sigma_j(\alpha_i)\qquad\text{and}\qquad N_j(\beta_{ij}^{-1})=\alpha_j/\sigma_i(\alpha_j)\qquad\text{ for each }i>j \label{eq:tuplerelations}
\end{equation}
by \autoref{lem:constructalphabeta}, and
\begin{equation}
	\frac{\sigma_j(\beta_{ik})}{\beta_{ik}}=\frac{\sigma_k(\beta_{ij})}{\beta_{ij}}\cdot\frac{\sigma_i(\beta_{jk})}{\beta_{jk}}\qquad\text{ for each }i>j>k \label{eq:betarelations}
\end{equation}
by \autoref{lem:betarelations}. This data is so important that we will give it a name.
\begin{definition}
	In the above set-up, the data of $(\{\alpha_i\},\{\beta_{ij}\})$ satisfying \autoref{eq:tuplefields} and \autoref{eq:tuplerelations} and \autoref{eq:betarelations} will be called a \textit{$\{\sigma_i\}_{i=1}^m$-tuple}. When understood, the $\{\sigma_i\}_{i=1}^m$ will be abbreviated.
\end{definition}
Note that this definition is independent of $\mc E$, but a choice of extension $\mc E$ and lifts $F_i$ give a $\{\sigma_i\}_{i=1}^m$-tuple as described above.
\begin{remark}
	The set of $\{\sigma_i\}_{i=1}^m$-tuples form a group under multiplication in $A$. Indeed, the conditions \autoref{eq:tuplefields} and \autoref{eq:tuplerelations} and \autoref{eq:betarelations} are closed under multiplication and inversion.
\end{remark}
We also know from \autoref{lem:switchtwo} that
\[F_i^xF_j^y=\prod_{k=0}^{x-1}\prod_{\ell=0}^{y-1}\sigma_i^k\sigma_j^\ell(\beta_{ij})F_j^yF_i^x\]
for $i>j$ and $x,y\ge0$. It will be helpful to have some notation for the residue term in $A$, so we define
\[\beta_{ij}^{(k\ell)}\coloneqq\prod_{k=0}^{x-1}\prod_{\ell=0}^{y-1}\sigma_i^k\sigma_j^\ell(\beta_{ij}).\]
Now, combined with the fact that $F_ix=\sigma_i(x)F_i$ for each $F_i$ and $x\in A$, we have been approximately told how the group operation works in $\mc E$. Namely, we could conceivably write any element of $\mc E$ in the form
\[xF_1^{a_1}\cdots F_m^{a_m}\]
for $x\in A$ and $a_i\in\ZZ/n_i\ZZ$ because we know how to make these elements commute and generate $\mc E$. Further, we can multiply out two terms of the form
\[xF_1^{a_1}\cdots F_m^{a_m}\cdot yF_1^{b_1}\cdots F_m^{b_m}\]
into a term of the form $zF_1^{c_1}\cdots F_m^{c_m}$. In fact, it will be helpful for us to see how to do this.
\begin{proposition} \label{prop:multiplytwoelements}
	Fix everything as in the set-up, except drop the assumption that $\{\sigma_i\}_{i=1}^m$ generate $\Gamma$. Then, choosing $a_i,b_i\in\NN$ for each $i$, we have
	\[\left(\prod_{i=1}^mF_i^{a_i}\right)\left(\prod_{i=1}^mF_i^{b_i}\right)=\left[\prod_{1\le j<i\le m}\Bigg(\prod_{1\le k<j}\sigma_k^{a_k+b_k}\Bigg)\Bigg(\prod_{j\le k<i}\sigma_k^{a_k}\Bigg)\beta_{ij}^{(a_ib_j)}\right]\left(\prod_{i=1}^mF_i^{a_i+b_i}\right).\]
\end{proposition}
\begin{proof}
	The reason that we dropped the assumption on $\{\sigma_i\}_{i=1}^m$ is so that we may induct directly on $m$. We start by showing that
	\[\left(\prod_{i=1}^mF_i^{a_i}\right)F_1^{b_1}=\left[\prod_{1<i\le m}\left(\prod_{1\le k<i}\sigma_k^{a_k}\right)\beta_{i1}^{(a_ib_1)}\right]F_1^{a_1+b_1}\prod_{i=2}^mF_i^{a_i}.\]
	We do this by induction on $m$. When $m=0$ and even for $m=1$, there is nothing to say. For the inductive step, we assume
	\[\left(\prod_{i=1}^mF_i^{a_i}\right)F_1^{b_1}=\left[\prod_{1<i\le m}\left(\prod_{1\le k<i}\sigma_k^{a_k}\right)\beta_{i1}^{(a_ib_1)}\right]F_1^{a_1+b_1}\prod_{i=2}^mF_i^{a_i}\]
	and compute
	\begin{align*}
		\left(\prod_{i=1}^{m+1}F_i^{a_i}\right)F_1^{b_1} &= \left(\prod_{i=1}^{m}F_i^{a_i}\right)F_{m+1}^{a_{m+1}}F_1^{b_1} \\
		&= \left(\prod_{i=1}^{m}F_i^{a_i}\right)\beta_{m+1,1}^{(a_{m+1}b_1)}F_1^{b_1}F_{m+1}^{a_{m+1}} \\
		&= \left[\left(\prod_{k=1}^m\sigma_k^{a_k}\right)\beta_{m+1,1}^{(a_{m+1}b_1)}\right]\left[\prod_{1<i\le m}\left(\prod_{1\le k<i}\sigma_k^{a_k}\right)\beta_{i1}^{(a_ib_1)}\right]F_1^{a_1+b_1}\left(\prod_{i=2}^mF_i^{a_i}\right)F_{m+1}^{a_{m+1}} \\
		&= \left[\prod_{1<i\le m+1}\left(\prod_{1\le k<i}\sigma_k^{a_k}\right)\beta_{i1}^{(a_ib_1)}\right]F_1^{a_1+b_1}\left(\prod_{i=2}^{m+1}F_i^{a_i}\right),
	\end{align*}
	which completes our inductive step.

	We now attack the statement of the proposition directly, again inducting on $m$. For $m=0$ and even for $m=1$, there is again nothing to say. For the inductive step, take $m>1$, and we get to assume that
	\[\left(\prod_{i=2}^mF_i^{a_i}\right)\left(\prod_{i=2}^mF_i^{b_i}\right)=\left[\prod_{2\le j<i\le m}\Bigg(\prod_{2\le k<j}\sigma_k^{a_k+b_k}\Bigg)\Bigg(\prod_{j\le k<i}\sigma_k^{a_k}\Bigg)\beta_{ij}^{(a_ib_j)}\right]\left(\prod_{i=2}^mF_i^{a_i+b_i}\right).\]
	From here, we can compute
	\begin{align*}
		\left(\prod_{i=1}^mF_i^{a_i}\right)\left(\prod_{i=1}^mF_i^{b_i}\right) &= \left(\prod_{i=1}^mF_i^{a_i}\right)F_1^{b_1}\left(\prod_{i=2}^mF_i^{b_i}\right) \\
		&= \left[\prod_{1<i\le m}\Bigg(\prod_{1\le k<i}\sigma_k^{a_k}\Bigg)\beta_{i1}^{(a_ib_1)}\right]F_1^{a_1+b_1}\left(\prod_{i=2}^mF_i^{a_i}\right)\left(\prod_{i=2}^mF_i^{b_i}\right) \\
		&= \left[\prod_{1<i\le m}\Bigg(\prod_{1\le k<i}\sigma_k^{a_k}\Bigg)\beta_{i1}^{(a_ib_1)}\right]F_1^{a_1+b_1}\cdot \\
		&\qquad\qquad\left[\prod_{2\le j<i\le m}\Bigg(\prod_{2\le k<j}\sigma_k^{a_k+b_k}\Bigg)\Bigg(\prod_{j\le k<i}\sigma_k^{a_k}\Bigg)\beta_{ij}^{(a_ib_j)}\right]\left(\prod_{i=2}^mF_i^{a_i+b_i}\right) \\
		&= \left[\prod_{1<i\le m}\Bigg(\prod_{1\le k<i}\sigma_k^{a_k}\Bigg)\beta_{i1}^{(a_ib_1)}\right]\cdot \\
		&\qquad\qquad \sigma_1^{a_1+b_1}\left[\prod_{2\le j<i\le m}\Bigg(\prod_{2\le k<j}\sigma_k^{a_k+b_k}\Bigg)\Bigg(\prod_{j\le k<i}\sigma_k^{a_k}\Bigg)\beta_{ij}^{(a_ib_j)}\right]\left(\prod_{i=2}^mF_i^{a_i+b_i}\right).
	\end{align*}
	From here, a little rearrangement finishes the inductive step.
\end{proof}
The reason we exerted this pain upon ourselves is for the following result.
\begin{prop} \label{prop:writedowncocycle}
	Fix everything as in the set-up. Then, if well-defined, we can represent the cohomology class corresponding to $\mc E$ by the cocycle
	\[c(g,h)\coloneqq\left[\prod_{1\le j<i\le m}\Bigg(\prod_{1\le k<j}\sigma_k^{a_k+b_k}\Bigg)\Bigg(\prod_{j\le k<i}\sigma_k^{a_k}\Bigg)\beta_{ij}^{(a_ib_j)}\right]\left[\prod_{i=1}^m\Bigg(\prod_{1\le k<i}\sigma_k^{a_k+b_k}\Bigg)\alpha_i^{\floor{\frac{a_i+b_i}{n_i}}}\right],\]
	where $g=\prod_i\sigma_i^{a_i}$ and $h=\prod_i\sigma_i^{b_i}$.
\end{prop}
Observe that \autoref{prop:writedowncocycle} has a fairly strong hypothesis that $c$ is well-defined; we will return to this later.
\begin{proof}
	Very quickly, we use the division algorithm to define
	\[a_i+b_i=n_iq_i+r_i\]
	where $q_\in\{0,1\}$ and $0\le r_i<n_i$. In particular,
	\[gh=\prod_{i=1}^mF_i^{r_i}.\]
	Now, because the elements $\sigma_i$ generate $\Gamma$, we see that the lifts $\sigma_i\mapsto F_i$ defines a section $s\colon\Gamma\to\mc E$. As such, we can compute a representing cocycle for our cohomology class as
	\begin{align*}
		c(g,h) &= s(g)s(h)s(gh)^{-1} \\
		&= \Bigg(\prod_{i=1}^mF_i^{a_i}\Bigg)\Bigg(\prod_{i=1}^mF_i^{b_i}\Bigg)\Bigg(\prod_{i=1}^mF_i^{r_i}\Bigg)^{-1} \\
		&= \left[\prod_{1\le j<i\le m}\Bigg(\prod_{1\le k<j}\sigma_k^{a_k+b_k}\Bigg)\Bigg(\prod_{j\le k<i}\sigma_k^{a_k}\Bigg)\beta_{ij}^{(a_ib_j)}\right]\left(\prod_{i=1}^mF_i^{a_i+b_i}\right)\Bigg(\prod_{i=1}^mF_{m-i+1}^{-r_{m-i+1}}\Bigg).
	\end{align*}
	It remains to deal with the last products; we claim that it is equal to
	\[\left(\prod_{i=1}^mF_i^{a_i+b_i}\right)\Bigg(\prod_{i=1}^mF_{m-i+1}^{-r_{m-i+1}}\Bigg)=\prod_{i=1}^m\Bigg(\prod_{1\le k<i}\sigma_k^{a_k+b_k}\Bigg)\alpha_i^{q_i},\]
	which will finish the proof. We induct on $m$; for $m=0$ and $m=1$, there is nothing to say. For the inductive step, we assume that
	\[\left(\prod_{i=2}^mF_i^{a_i+b_i}\right)\Bigg(\prod_{i=1}^{m-1}F_{m-i+1}^{-r_{m-i+1}}\Bigg)=\prod_{i=2}^m\Bigg(\prod_{2\le k<i}\sigma_k^{a_k+b_k}\Bigg)\alpha_i^{q_i}\]
	and compute
	\begin{align*}
		\left(\prod_{i=1}^mF_i^{a_i+b_i}\right)\Bigg(\prod_{i=1}^mF_{m-i+1}^{-r_{m-i+1}}\Bigg) &= F_1^{a_1+b_1}\left(\prod_{i=2}^mF_i^{a_i+b_i}\right)\Bigg(\prod_{i=1}^{m-1}F_{m-i+1}^{-r_{m-i+1}}\Bigg)F_1^{-a_1-b_1}F_1^{a_1+b_1-r_1} \\
		&= F_1^{a_1+b_1}\left(\prod_{i=2}^m\Bigg(\prod_{2\le k<i}\sigma_k^{a_k+b_k}\Bigg)\alpha_i^{q_i}\right)F_1^{-a_1-b_1}\alpha_1^{q_1} \\
		&= \left(\prod_{i=2}^m\Bigg(\prod_{1\le k<i}\sigma_k^{a_k+b_k}\Bigg)\alpha_i^{q_i}\right)\alpha_1^{q_1} \\
		&= \prod_{i=1}^m\Bigg(\prod_{1\le k<i}\sigma_k^{a_k+b_k}\Bigg)\alpha_i^{q_i},
	\end{align*}
	finishing.
\end{proof}

\subsubsection{The Modified Set-Up}
A priori we have no reason to expect that the $c$ constructed in \autoref{prop:writedowncocycle} is actually a cocycle, especially if the $\sigma_i$ have nontrivial relations.

To account for this, we modify our set-up slightly. By the classification of finitely generated abelian groups, we may write
\[\Gamma\simeq\bigoplus_{k=1}^m\Gamma_k,\]
where $\Gamma_k\subseteq\Gamma$ with $\Gamma_k\cong\ZZ/n_k\ZZ$ and $n_k>1$ for each $n_k$. As such, we let $\sigma_k$ be a generating element of $\Gamma_k$ so that we still know that the $\sigma_k$ generate $\Gamma$. In this case, we have the following result.
\begin{theorem} \label{thm:getcocycle}
	Fix everything as in the modified set-up, forgetting about the extension $\mc E$. Then a $\{\sigma_i\}_{i=1}^m$-tuple of $\{\alpha_i\}_{i=1}^m$ and $\{\beta_{ij}\}_{i>j}$ makes
	\[c(g,h)\coloneqq\left[\prod_{1\le j<i\le m}\Bigg(\prod_{1\le k<j}\sigma_k^{a_k+b_k}\Bigg)\Bigg(\prod_{j\le k<i}\sigma_k^{a_k}\Bigg)\beta_{ij}^{(a_ib_j)}\right]\left[\prod_{i=1}^m\Bigg(\prod_{1\le k<i}\sigma_k^{a_k+b_k}\Bigg)\alpha_i^{\floor{\frac{a_i+b_i}{n_i}}}\right],\]
	where $g\coloneqq\prod_i\sigma_i^{a_i}$ with $h\coloneqq\prod_i\sigma_j^{a_j}$ and $0\le a_i,b_i<n_i$, into a cocycle in $Z^2(\Gamma,A)$.
\end{theorem}
\begin{proof}
	Note that $c$ is now surely well-defined because the elements $g$ and $h$ have unique representations as described. Anyway, we relegate the cocycle check to \autoref{sec:verifycocycle} because it is long, annoying, and unenlightening.
\end{proof}
Observe that the above construction has now completely forgotten about $\mc E$! Namely, we have managed to go from tuples straight to cocycles; this is theoretically good because it will allow us to go fully in reverse: we will be able to start with a tuple, build the corresponding cocycle, from which the extension arises. However, equivalence classes of cocycles give the ``same'' extension, so we will also need to give equivalence classes for tuples as well.

\subsection{Building Tuples}
We continue in the modified set-up of the previous section. There is already an established way to get from a cocycle to an extension, which means that it should be possible to go straight from the cocycle to a $\{\sigma_i\}_{i=1}^m$-tuple. Again, it will be beneficial to write this out.
\begin{lemma} \label{lem:explicitalphabeta}
	Fix everything as in the modified set-up, but suppose that $\mc E=\mc E_c$ is the extension generated from a cocycle $c\in Z^2(\Gamma,A)$. Then, if $F_i=(x_i,\sigma_i)$ are our lifts, we have
	\[\alpha_i=N_i(x_i)\cdot\prod_{k=0}^{n_i-1}c\left(\sigma_i^k,\sigma_i\right)\qquad\text{and}\qquad\beta_{ij}=\frac{x_i}{\sigma_j(x_i)}\cdot\frac{\sigma_i(x_j)}{x_j}\cdot\frac{c(\sigma_i,\sigma_j)}{c(\sigma_j,\sigma_i)}\]
	for each $\alpha_i$ and $\beta_{ij}$.
\end{lemma}
\begin{proof}
	The equality for the $\alpha_i$ follow from \autoref{lem:explicitalpha}. For the equality about $\beta_{ij}$, we simply compute
	by brute force, writing
    \begin{align*}
        F_iF_j &= (x_i\cdot\sigma_ix_j\cdot c(\sigma_i,\sigma_j),\sigma_i\sigma_j) \\
        F_jF_i &= (x_j\cdot\sigma_jx_i\cdot c(\sigma_j,\sigma_i),\sigma_j\sigma_i) \\
        (F_jF_i)^{-1} &= \left((\sigma_j\sigma_i)^{-1}(x_j\cdot\sigma_jx_i\cdot c(\sigma_j,\sigma_i))^{-1},\sigma_i^{-1}\sigma_j^{-1}\right),
    \end{align*}
    which gives
    \begin{align*}
        \beta_{ij} &= (F_iF_j)(F_jF_i)^{-1} \\
        &= \left(\frac{x_i}{\sigma_jx_i}\cdot\frac{\sigma_ix_j}{x_j}\cdot\frac{c(\sigma_i,\sigma_j)}{c(\sigma_j,\sigma_i)},1\right),
    \end{align*}
	finishing.
\end{proof}
Here is a nice sanity check that we are doing things in the right setting: not only can we build tuples from extensions, but we can find an extension corresponding to any tuple.
\begin{cor} \label{cor:alltuplesfromextens}
	Fix everything as in the modified set-up, forgetting about the extension $\mc E$. For any $\{\sigma_i\}_{i=1}^m$-tuple of $\{\alpha_i\}_{i=1}^m$ and $\{\beta_{ij}\}_{i>j}$, there exists an extension $\mc E$ and lifts $F_i$ of the $\sigma_i$ so that
	\[\alpha_i=F_i^{n_i}\qquad\text{and}\qquad\beta_{ij}=F_iF_jF_i^{-1}F_j^{-1}.\]
\end{cor}
\begin{proof}
	From \autoref{thm:getcocycle}, we may build the cocycle $c\in Z^2(\Gamma,A)$ defined by
	\begin{equation}
		c(g,h)\coloneqq\left[\prod_{1\le j<i\le m}\Bigg(\prod_{1\le k<j}\sigma_k^{a_k+b_k}\Bigg)\Bigg(\prod_{j\le k<i}\sigma_k^{a_k}\Bigg)\beta_{ij}^{(a_ib_j)}\right]\left[\prod_{i=1}^m\Bigg(\prod_{1\le k<i}\sigma_k^{a_k+b_k}\Bigg)\alpha_i^{\floor{\frac{a_i+b_i}{n_i}}}\right], \label{eq:uglycocycle}
	\end{equation}
	where $g\coloneqq\prod_iF_i^{a_i}$ and $h\coloneqq\prod_iF_j^{a_j}$ and $0\le a_i,b_i<n_i$. As such, we use $\mc E\coloneqq\mc E_c$ to be the corresponding extension and $F_i\coloneqq(1,\sigma_i)$ as our lifts. We have the following checks.
	\begin{itemize}
		\item To show $\alpha_i=F_i^{n_i}$, we use \autoref{lem:explicitalphabeta} to compute $F_i^{n_i}$, which means we want to compute
		\[\prod_{k=0}^{n_i-1}c\left(\sigma_i^k,\sigma_i\right).\]
		Well, plugging $c\left(\sigma_i^k,\sigma_i\right)$ into \autoref{eq:uglycocycle}, we note that all $\beta_{k\ell}^{(a_kb_\ell)}$ terms vanish (either $a_k=0$ or $b_\ell=0$ for each $k\ne\ell$), so the big left product completely vanishes.
		
		As for the right product, the only term we have to worry about is
		\[\Bigg(\prod_{1\le k<i}\sigma_k^{0+0}\Bigg)\alpha_i^{\floor{\frac{k+1}{n_i}}},\]
		which is equal to $1$ when $k\le n_i-1$ and $\alpha_i$ when $k=n_i-1$. As such, we do indeed have $\alpha_i=F_i^{n_i}$.
		\item To show $\beta_{ij}=F_iF_jF_i^{-1}F_j^{-1}$ for $i>j$, we again use \autoref{lem:explicitalphabeta} to compute $F_iF_jF_i^{-1}F_j^{-1}$, which means we want to compute
		\[\frac{c(\sigma_i,\sigma_j)}{c(\sigma_j,\sigma_i)}.\]
		Plugging into \autoref{eq:uglycocycle} once more, there is no way to make $\floor{(a_k+b_k)/n_k}$ nonzero (recall we set $n_k>1$ for each $k$) in either $c(\sigma_i,\sigma_j)$ or $c(\sigma_j,\sigma_i)$. As such, the right-hand product term disappears.

		As for the left product, we note that it still vanishes for $c(\sigma_j,\sigma_i)$ because $i>j$ implies that either $a_k=0$ or $b_\ell=0$ for each $k>\ell$. However, for $c(\sigma_i,\sigma_j)$, we do have $a_i=1$ and $b_j=1$ only, so we have to deal with exactly the term
		\[\Bigg(\prod_{1\le k<j}\sigma_k^{a_k+b_k}\Bigg)\Bigg(\prod_{j\le k<i}\sigma_k^{a_k}\Bigg)\beta_{ij}.\]
		With $i>j$ and $a_k=b_k=0$ for $k\notin\{i,j\}$, we see that the product of all the $\sigma_k$s will disappear, indeed only leaving us with $\beta_{ij}$.
	\end{itemize}
	The above computations complete the proof.
\end{proof}
And here is our first taste of (partial) classification.
\begin{cor} \label{cor:cocycletuplesection}
	Fix everything as in the modified set-up, forgetting about the extension $\mc E$. Then the formula of \autoref{thm:getcocycle} and the formulae of \autoref{lem:explicitalphabeta} (setting $x_i=1$ for each $i$) are homomorphisms of abelian groups between the set of $\{\sigma_i\}_{i=1}^m$-tuples and cocycles in $Z^2(\Gamma,A)$. In fact, the formula of \autoref{thm:getcocycle} is a section of the formulae of \autoref{lem:explicitalphabeta}.
\end{cor}
\begin{proof}
	The formulae in \autoref{thm:getcocycle} and \autoref{lem:explicitalphabeta} are both large products in their inputs, so they are multiplicative (i.e., homomorphisms). It remains to check that we have a section. Well, starting with a $\{\sigma_i\}_{i=1}^m$-tuple and building the corresponding cocycle $c$ by \autoref{thm:getcocycle}, the proof of \autoref{cor:alltuplesfromextens} shows that the formulae of \autoref{lem:explicitalphabeta} recovers the correct $\{\sigma_i\}_{i=1}^m$-tuple.
\end{proof}

\subsection{Equivalence Classes of Tuples}
We continue in the modified set-up. We would like to make \autoref{cor:cocycletuplesection} into a proper isomorphism of abelian groups, but this is not feasible; for example, the cocycle $c$ generated by \autoref{thm:getcocycle} will always have $c(\sigma_j,\sigma_i)=1$ for $i>j$, which is not true of all cocycles in $Z^2(\Gamma,A)$.

However, we did have a notion that the data of a $\{\sigma_i\}_{i=1}^m$ should be enough to specify the group law of the extension that the tuple comes from, so we do expect to be able to define all extensions---and hence achieve all cohomology classes---from a specially chosen $\{\sigma_i\}_{i=1}^m$-tuple.

To make this precise, we want to define an equivalence relation on tuples which go to the same cohomology class and then show that the map \autoref{thm:getcocycle} is surjective on these equivalence classes. The correct equivalence relation is taken from \autoref{lem:explicitalphabeta}.
\begin{definition}
	Fix everything as in the modified set-up. We say that two $\{\sigma_i\}_{i=1}^m$-tuples $(\{\alpha_i\},\{\beta_{ij}\})$ and $(\{\alpha_i'\},\{\beta_{ij}'\})$ are \textit{equivalent} if and only if there exist elements $x_1,\ldots,x_m\in A$ such that
	\[\alpha_i=N_i(x_i)\cdot\prod_{k=0}^{n_i-1}c\left(\sigma_i^k,\sigma_i\right)\qquad\text{and}\qquad\beta_{ij}=\frac{x_i}{\sigma_j(x_i)}\cdot\frac{\sigma_i(x_j)}{x_j}\cdot\frac{c(\sigma_i,\sigma_j)}{c(\sigma_j,\sigma_i)}\]
	for each $\alpha_i$ and $\beta_{ij}$. We may notate this by $(\{\alpha_i\},\{\beta_{ij}\})\sim(\{\alpha_i'\},\{\beta_{ij}'\})$.
\end{definition}
This notion of equivalence can be seen to be the correct one in the sense that it correctly generalizes \autoref{prop:findallalpha}.
\begin{proposition} \label{prop:extenmakesaclass}
	Fix everything as in the modified set-up with an extension $\mc E$. As the lifts $F_i$ change, the corresponding values of
	\[\alpha_i\coloneqq F_i^{n_i}\qquad\text{and}\qquad\beta_{ij}\coloneqq F_iF_jF_i^{-1}F_j^{-1}\]
	go through a full equivalence class of $\{\sigma_i\}_{i=1}^m$-tuples.
\end{proposition}
\begin{proof}
	We proceed as in \autoref{prop:findallalpha}. Given an extension $\mc E'$, let $S_{\mc E'}$ be the set of $\{\sigma_i\}_{i=1}^m$-tuples generated as the lifts $F_i$ change. We start by showing that an isomorphism $\varphi\colon\mc E\simeq\mc E'$ of extensions implies that $S_{\mc E}=S_{\mc E'}$; by symmetry, it will be enough for $S_{\mc E}\subseteq S_{\mc E'}$. The isomorphism induces the following diagram.
	% https://q.uiver.app/?q=WzAsMTAsWzAsMCwiMSJdLFsxLDAsIkxeXFx0aW1lcyJdLFsyLDAsIlxcbWMgRSJdLFszLDAsIlxcR2FtbWEiXSxbNCwwLCIxIl0sWzAsMSwiMSJdLFsxLDEsIkxeXFx0aW1lcyJdLFsyLDEsIlxcbWMgRSciXSxbMywxLCJcXEdhbW1hIl0sWzQsMSwiMSJdLFswLDFdLFsxLDJdLFsyLDMsIlxccGkiXSxbMyw0XSxbNSw2XSxbNiw3XSxbNyw4LCJcXHBpJyJdLFs4LDldLFsyLDcsIlxcdmFycGhpIl0sWzEsNiwiIiwxLHsibGV2ZWwiOjIsInN0eWxlIjp7ImhlYWQiOnsibmFtZSI6Im5vbmUifX19XSxbMyw4LCIiLDEseyJsZXZlbCI6Miwic3R5bGUiOnsiaGVhZCI6eyJuYW1lIjoibm9uZSJ9fX1dXQ==&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	\[\begin{tikzcd}
		1 & {A} & {\mc E} & \Gamma & 1 \\
		1 & {A} & {\mc E'} & \Gamma & 1
		\arrow[from=1-1, to=1-2]
		\arrow[from=1-2, to=1-3]
		\arrow["\pi", from=1-3, to=1-4]
		\arrow[from=1-4, to=1-5]
		\arrow[from=2-1, to=2-2]
		\arrow[from=2-2, to=2-3]
		\arrow["{\pi'}", from=2-3, to=2-4]
		\arrow[from=2-4, to=2-5]
		\arrow["\varphi", from=1-3, to=2-3]
		\arrow[Rightarrow, no head, from=1-2, to=2-2]
		\arrow[Rightarrow, no head, from=1-4, to=2-4]
	\end{tikzcd}\]
	To show that $S_{\mc E}\subseteq S_{\mc E'}$, pick up some $\{\sigma_i\}_{i=1}^m$-tuple $(\{\alpha_i\},\{\beta_{ij}\})$ generated from lifts $F_i\in\mc E$ (i.e., $\pi(F_i)=\sigma_i$), where
	\[\alpha_i\coloneqq F_i^{n_i}\qquad\text{and}\qquad\beta_{ij}\coloneqq F_iF_jF_i^{-1}F_j^{-1}.\]
	Now, we note that $F_i'\coloneqq\varphi(F_i)$ will have
	\[\pi(F_i')=\pi(\varphi(F_i))=\varphi(\pi(F_i))=\sigma_i\]
	by the commutativity of the diagram, so the $F_i'$ are lifts of the $\sigma_i$. Further, we see that
	\[(F_i')^{n_i}=\varphi(F_i)^{n_i}=\varphi\left(F_i^{n_i}\right)=\varphi(\alpha_i)=\alpha_i\]
	for each $i$, and
	\[F_i'F_j'(F_i')^{-1}(F_j')^{-1}=\varphi\left(F_iF_jF_i^{-1}F_j^{-1}\right)=\varphi(\beta_{ij})=\beta_{ij}\]
	for each $i>j$. Thus, $(\{\alpha_i\},\{\beta_{ij}\})$ is a $\{\sigma_i\}_{i=1}^m$-tuple generated by lifts from $\mc E'$, implying that $(\{\alpha_i\},\{\beta_{ij}\})\in S_{\mc E'}$.

	It now suffices to show the statement in the proposition for a specific extension isomorphic to $\mc E$. Well, the isomorphism class of $\mc E$ corresponds to some cohomology class in $H^2(\Gamma,A)$, for which we let $c$ be a representative; then $\mc E\simeq\mc E_c$, so we may show the statement for $\mc E\coloneqq\mc E_c$. Indeed, as the lifts $F_i=(x_i,\sigma_i)$ change, we know by \autoref{lem:explicitalphabeta} that
	\[\alpha_i=N_i(x_i)\cdot\prod_{k=0}^{n_i-1}c\left(\sigma_i^k,\sigma_i\right)\qquad\text{and}\qquad\beta_{ij}=\frac{x_i}{\sigma_j(x_i)}\cdot\frac{\sigma_i(x_j)}{x_j}\cdot\frac{c(\sigma_i,\sigma_j)}{c(\sigma_j,\sigma_i)}\]
	for each $\alpha_i$ and $\beta_{ij}$. All of these live in the same equivalence class by definition of the equivalence, and as the $x_i$ are allowed to vary over all of $A$, they will fill up that equivalence class fully. This finishes.
\end{proof}
We are now ready to upgrade our section.
\begin{cor} \label{cor:cohomologymakesaclass}
	Fix everything as in the modified set-up, forgetting about the extension $\mc E$. Fixing a cohomology class $[c]\in H^2(\Gamma,A)$, the set of $\{\sigma_i\}_{i=1}^m$ which correspond to $[c]$ (via \autoref{thm:getcocycle}) forms exactly one equivalence class.
\end{cor}
\begin{proof}
	We show that two tuples are equivalent if and only if their corresponding cocycles (via \autoref{thm:getcocycle}) to the same cohomology class, which will be enough.
	
	In one direction, suppose $(\{\alpha_i\},\{\beta_{ij}\})\sim(\{\alpha_i'\},\{\beta_{ij}'\})$. By \autoref{cor:alltuplesfromextens}, we can find an extension $\mc E$ which gives $(\{\alpha_i\},\{\beta_{ij}\})$ by choosing an appropriate set of lifts. By \autoref{prop:extenmakesaclass}, we see that $(\{\alpha_i'\},\{\beta_{ij}'\})$ must also come from choosing an appropriate set of lifts in $\mc E$. However, the cocycles in $Z^2(\Gamma,A)$ generated by \autoref{thm:getcocycle} from our two tuples now both represent the isomorphism class of $\mc E$ by \autoref{prop:writedowncocycle}, so these cocycles belong to the same cohomology class.

	In the other direction, name the cocycles corresponding to $(\{\alpha_i\},\{\beta_{ij}\})$ and $(\{\alpha_i'\},\{\beta_{ij}'\})$ by $c$ and $c'$ respectively, and suppose $[c]=[c']$. Then $\mc E_c\simeq\mc E_{c'}$ as extensions, but we know by the proof of \autoref{cor:alltuplesfromextens} that $(\{\alpha_i\},\{\beta_{ij}\})$ comes from choosing lifts of $\mc E_c$ and similar for $(\{\alpha_i'\},\{\beta_{ij}'\})$. In particular, because $\mc E_c\simeq\mc E_{c'}$, we know that $(\{\alpha_i'\},\{\beta_{ij}'\})$ will also come from choosing some lifts in $\mc E_c$ (recall the proof of \autoref{prop:extenmakesaclass}), so $(\{\alpha_i\},\{\beta_{ij}\})\sim(\{\alpha_i'\},\{\beta_{ij}'\})$ follows.
\end{proof}
\begin{theorem} \label{thm:classisomorphism}
	The maps described in \autoref{cor:cocycletuplesection} descend to an isomorphism of abelian groups between the equivalence classes of $\{\sigma_i\}_{i=1}^m$-tuples and cohomology classes in $H^2(\Gamma,A)$.
\end{theorem}
\begin{proof}
	The fact that the maps are well-defined (in both directions) and hence injective is \autoref{cor:cohomologymakesaclass}. The fact that we had a section from tuples to cocycles implies that the map from cocycles to tuples was also surjective. Thus, we have a bona fide isomorphism.
\end{proof}

\subsection{Classification of Extensions}
We remark that we are now able to classify all extensions up to isomorphism, in some sense. At a high level, an isomorphism class of extensions corresponds to a particular cohomology class in $H^2(\Gamma,A)$, so choosing a $\{\sigma_i\}_{i=1}^m$-tuple $(\{\alpha_i\},\{\beta_{ij}\})$ corresponding to this class, we can write out a representative of this cocycle by \autoref{thm:getcocycle}, properly corresponding to the original extension by \autoref{prop:writedowncocycle}.

In fact, the cocycle in \autoref{prop:writedowncocycle} is generated by the description of the group law in \autoref{prop:multiplytwoelements}, and the entire computation only needed to use the following relations, for the appropriate choice of lifts $F_i$.
\begin{listalph}
	\item $F_ix=\sigma_i(x)F_i$ for each $i$ and $x\in A$.
	\item $F_i^{n_i}=\alpha_i$ for each $i$.
	\item $F_iF_jF_i^{-1}F_j^{-1}=\beta_{ij}$ for each $i>j$; i.e., $F_iF_j=\beta_{ij}F_jF_i$.
\end{listalph}
As such, the above relations fully describe the extension because they also specify the cocycle, and we know that this cocycle is well-defined. We summarize this discussion into the following theorem.
\begin{theorem}
	Fix everything as in the modified set-up, forgetting about the extension $\mc E$. Given a $\{\sigma_i\}_{i=1}^m$-tuple $(\{\alpha_i\},\{\beta_{ij}\})$, define the group $\mc E(\{\alpha_i\},\{\beta_{ij}\})$ as being generated by $A$ and elements $\{F_i\}_{i=1}^n$ having the following relations.
	\begin{listalph}
		\item $F_ix=\sigma_i(x)F_i$ for each $i$ and $x\in A$.
		\item $F_i^{n_i}=\alpha_i$ for each $i$.
		\item $F_iF_j=\beta_{ij}F_jF_i$ for each $i>j$.
	\end{listalph}
	Then the natural embedding $A\into\mc E(\{\alpha_i\},\{\beta_{ij}\})$ and projection $\pi\colon\mc E(\{\alpha_i\},\{\beta_{ij}\})\onto\Gamma$ by $F_i\mapsto\sigma_i$ makes $\mc E(\{\alpha_i\},\{\beta_{ij}\})$ into an extension. In fact, all extensions are isomorphic to some $\mc E(\{\alpha_i\},\{\beta_{ij}\})$.
\end{theorem}
\begin{proof}
	This follows from the preceding discussion, though we will provide a few more words in this proof. The exactness of
	\[1\to A\to\mc E(\{\alpha_i\},\{\beta_{ij}\})\stackrel\pi\to\Gamma\to1\]
	follows quickly. Further, the action of conjugation of $\mc E$ on $A$ corresponds correctly to the $\Gamma$-action by (a). So we do indeed have an extension.

	It remains to show that all extensions are isomorphic to one of this type. Well, note that \autoref{prop:multiplytwoelements} and \autoref{prop:writedowncocycle} use only the above relations to write down a cocycle representing the isomorphism class of $\mc E(\{\alpha_i\},\{\beta_{ij}\})$, and it is the cocycle corresponding to the $\{\sigma_i\}_{i=1}^m$-tuple $(\{\alpha_i\},\{\beta_{ij}\})$ itself as described in \autoref{thm:getcocycle}.

	However, we know that as the equivalence class of $(\{\alpha_i\},\{\beta_{ij}\})$ changes, we will hit all cohomology classes in $H^2(\Gamma,A)$ by \autoref{thm:classisomorphism}. Thus, because every extension is represented by some cohomology class, every extension will be isomorphic to some $\mc E(\{\alpha_i\},\{\beta_{ij}\})$. This completes the proof.
\end{proof}

\newpage
\appendix
\section{Verification of the Cocycle} \label{sec:verifycocycle}
In this section, we verify \autoref{thm:getcocycle}. As such, in this section, we will work under the modified set-up, forgetting about the extension $\mc E$ but letting $(\{\alpha_i\},\{\beta_{ij}\})$ be some $\{\sigma_i\}_{i=1}^m$-tuple.

Here the formula looks like
\[c(g,g')\coloneqq\left[\prod_{1\le j<i\le m}\Bigg(\prod_{1\le k<j}\sigma_k^{a_k+b_k}\Bigg)\Bigg(\prod_{j\le k<i}\sigma_k^{a_k}\Bigg)\beta_{ij}^{(a_ib_j)}\right]\left[\prod_{i=1}^m\Bigg(\prod_{1\le k<i}\sigma_k^{a_k+b_k}\Bigg)\alpha_i^{\floor{\frac{a_i+b_i}{n_i}}}\right],\]
where $g=\prod_i\sigma_i^{a_i}$ and $g'=\prod_i\sigma_i^{b_i}$ with $0\le a_i,b_i<n_i$ and $q_i\coloneqq\floor{(a_i+b_i)/n_i}$. To make this more digestible, we define
\[g_i\coloneqq\prod_{1\le k<i}\sigma_i^{a_i}\]
for any $g=\prod_i\sigma_i^{a_i}\in\Gamma$, so we can write down our formula as
\[c(g,g')\coloneqq\left[\prod_{1\le j<i\le m}g_ig'_j\beta_{ij}^{(a_ib_j)}\right]\left[\prod_{i=1}^mg_ig'_i\alpha_i^{\floor{\frac{a_i+b_i}{n_i}}}\right].\]
Now, given $g,g',g''\in\Gamma$, we would like to check
\[gc(g',g'')\cdot c(g,g'g'')\stackrel?=c(gg',g'')\cdot c(g,g'),\]
where $g=\prod_i\sigma_i^{a_i}$ and $g'=\prod_i\sigma_i^{b_i}$ and $g''=\prod_i\sigma_i^{c_i}$ with $0\le a_i,b_i,c_i<n_i$.

\subsection{Carries}
We will begin our verification by dealing with carries; we start with the following lemma, intended to beef up our relation \autoref{eq:tuplerelations}.
\begin{lemma}
	Given indices $i>j$ with $a_i,a_j,q_i,q_j\ge0$, we have
	\[\beta_{ij}^{(a_ia_j)}=\beta_{ij}^{(a_i+q_in_i,a_j)}\left(\frac{\sigma_j^{a_j}(\alpha_i)}{\alpha_i}\right)^{q_i}\qquad\text{and}\qquad\beta_{ij}^{(a_ia_j)}=\beta_{ij}^{(a_i,a_j+q_jn_j)}\left(\frac{\alpha_j}{\sigma_i^{a_i}(\alpha_j)}\right)^{q_j}.\]
\end{lemma}
\begin{proof}
	This is a matter of force. For one, we compute
	\begin{align*}
		\beta_{ij}^{(a_i+n_iq_i,a_j)} &= \prod_{p=0}^{a_i+n_iq_i-1}\prod_{q=0}^{a_j-1}\sigma_i^p\sigma_j^q\beta_{ij} \\
		&= \left(\prod_{p=0}^{a_i-1}\prod_{q=0}^{a_j-1}\sigma_i^p\sigma_j^q\beta_{ij}\right)\left(\prod_{q=0}^{a_j-1}\prod_{p=a_i}^{a_i+n_iq_i-1}\sigma_i^p\sigma_j^q\beta_{ij}\right) \\
		&= \beta_{ij}^{(a_ia_j)}\left(\prod_{q=0}^{a_j-1}\sigma_j^q\op N_{L/L_i}(\beta_{ij})\right)^{q_i}.
	\end{align*}
	Now, using the relation $\op N_{L/L_i}(\beta_{ij})=\alpha_i/\sigma_j(\alpha_i)$ from \autoref{eq:tuplerelations}, this becomes
	\begin{align*}
		\beta_{ij}^{(a_i+n_iq_i,a_j)} &= \beta_{ij}^{(a_ia_j)}\left(\prod_{q=0}^{a_j-1}\frac{\sigma_j^q\alpha_i}{\sigma^{j+1}\alpha_i}\right)^{q_i} \\
		&= \beta_{ij}^{(a_ia_j)}\left(\frac{\alpha_i}{\sigma^{a_j}\alpha_i}\right)^{q_i},
	\end{align*}
	which rearranges into what we wanted.

	For the other, we again just compute
	\begin{align*}
		\beta_{ij}^{(a_i,a_j+n_jq_j)} &= \prod_{p=0}^{a_i-1}\prod_{q=0}^{a_j+n_jq_j-1}\sigma_i^p\sigma_j^q\beta_{ij} \\
		&= \left(\prod_{p=0}^{a_i-1}\prod_{q=0}^{a_j-1}\sigma_i^p\sigma_j^q\beta_{ij}\right)\left(\prod_{p=0}^{a_i-1}\prod_{q=q_j}^{a_j+n_jq_j-1}\sigma_i^p\sigma_j^q\beta_{ij}\right) \\
		&= \beta_{ij}^{(a_ia_j)}\left(\prod_{p=0}^{a_i-1}\sigma_i^p\op N_{L/L_q}(\beta_{ij})\right)^{q_i}.
	\end{align*}
	This time, we use the relation $\op N_{L/L_j}(\beta_{ij})=\sigma_i(\alpha_j)/\alpha_j$, which gives
	\begin{align*}
		\beta_{ij}^{(a_i,a_j+n_jq_j)} &= \beta_{ij}^{(a_ia_j)}\left(\prod_{p=0}^{a_i-1}\frac{\sigma_i^{p+1}(\alpha_j)}{\sigma_i^p(\alpha_j)}\right)^{q_i} \\
		&= \beta_{ij}^{(a_ia_j)}\left(\frac{\sigma_i^{a_j}(\alpha_j)}{\alpha_j}\right)^{q_i},
	\end{align*}
	which again rearranges into the desired.
\end{proof}
We are now ready to begin the computation, dealing with carries to start. Use the division algorithm to write
\[a_i+b_i=n_iu_i+x_i\qquad\text{and}\qquad b_i+c_i=n_iv_i+y_i,\]
where $u_i,v_i\in\{0,1\}$ and $0\le x_i,y_i<n_i$ for each $i$. We start by collecting remainder terms on the side of $gc(g',g'')\cdot c(g,g'g'')$.
\begin{enumerate}
	\item Note
	\begin{align*}
		gc(g',g'') &= g\left[\prod_{1\le j<i\le m}g_i'g''_j\beta_{ij}^{(b_ic_j)}\right]\cdot g\left[\prod_{i=1}^mg'_ig''_i\alpha_i^{v_i}\right],
	\end{align*}
	so we set
	\[R_1\coloneqq\prod_{i=1}^mgg'_ig''_i\alpha_i^{v_i}\]
	to be our remainder term.
	\item Note
	\begin{align*}
		c(g,g'g'') &= \left[\prod_{1\le j<i\le m}g_ig'_jg''_j\beta_{ij}^{(a_iy_j)}\right]\left[\prod_{i=1}^mg_ig'_ig''_i\alpha_i^{\floor{\frac{a_i+y_i}{n_i}}}\right] \\
		&= \left[\prod_{1\le j<i\le m}g_ig'_jg''_j\beta_{ij}^{(a_i,b_j+c_j)}\cdot g_ig'_jg''_j\left(\frac{\alpha_j}{\sigma_i^{a_i}\alpha_j}\right)^{v_i}\right]\left[\prod_{i=1}^mg_ig'_ig''_i\alpha_i^{\floor{\frac{a_i+y_i}{n_i}}}\right] \\
		&= \left[\prod_{1\le j<i\le m}g_ig'_jg''_j\beta_{ij}^{(a_i,b_j+c_j)}\right]\left[\prod_{1\le j<i\le m}g_ig'_jg''_j\left(\frac{\alpha_j}{\sigma_i^{a_i}\alpha_j}\right)^{v_i}\right]\left[\prod_{i=1}^mg_ig'_ig''_i\alpha_i^{\floor{\frac{a_i+y_i}{n_i}}}\right],
	\end{align*}
	so we set
	\[R_2\coloneqq\left[\prod_{1\le j<i\le m}g_ig'_jg''_j\left(\frac{\alpha_j}{\sigma_i^{a_i}\alpha_j}\right)^{v_i}\right]\left[\prod_{i=1}^mg_ig'_ig''_i\alpha_i^{\floor{\frac{a_i+y_i}{n_i}}}\right]\]
	to be our remainder term.
	\item Lastly, we collect our remainders. Observe
	\begin{align*}
		R_2 &= \left[\prod_{j=1}^mg'_jg''_j\Bigg(\prod_{i=j+1}^mg_i\cdot\frac{\alpha_j}{\sigma_i^{a_i}\alpha_j}\Bigg)^{v_i}\right]\left[\prod_{i=1}^mg_ig'_ig''_i\alpha_i^{\floor{\frac{a_i+y_i}{n_i}}}\right] \\
		&= \left[\prod_{j=1}^mg'_jg''_j\Bigg(\prod_{i=j+1}^m\frac{(\sigma_1^{a_1}\cdots\sigma_{i-1}^{a_{i-1}})\alpha_j}{(\sigma_1^{a_1}\cdots\sigma_{i-1}^{a_{i-1}})\sigma_i^{a_i}\alpha_j}\Bigg)^{v_i}\right]\left[\prod_{i=1}^mg_ig'_ig''_i\alpha_i^{\floor{\frac{a_i+y_i}{n_i}}}\right] \\
		&= \left[\prod_{j=1}^mg'_jg''_j\Bigg(\prod_{i=j+1}^m\frac{g_i\alpha_j}{g_{i+1}\alpha_j}\Bigg)^{v_i}\right]\left[\prod_{i=1}^mg_ig'_ig''_i\alpha_i^{\floor{\frac{a_i+y_i}{n_i}}}\right] \\
		&= \left[\prod_{j=1}^mg'_jg''_j\cdot\frac{g_{j+1}\alpha_j^{v_j}}{g\alpha_j^{v_j}}\right]\left[\prod_{i=1}^mg_ig'_ig''_i\alpha_i^{\floor{\frac{a_i+y_i}{n_i}}}\right].
	\end{align*}
	We now note that $g_{j+1}\alpha_j=g_j\alpha_j$ because $\alpha_j$ is fixed by $\sigma_j$. As such,
	\begin{align*}
		R_1R_2 &= \left[\prod_{i=1}^mgg'_ig''_i\alpha_i^{v_i}\right]\left[\prod_{i=1}^mg'_ig''_i\cdot\frac{g_i\alpha_i^{v_i}}{g\alpha_i^{v_i}}\right]\left[\prod_{i=1}^mg_ig'_ig''_i\alpha_i^{\floor{\frac{a_i+y_i}{n_i}}}\right] \\
		&= \prod_{i=1}^mg_ig'_ig''_i\alpha_i^{v_i+\floor{\frac{a_i+y_i}{n_i}}},
	\end{align*}
	which is nice enough for us now.
\end{enumerate}
Now, we collect remainder terms from $c(gg',g'')\cdot c(g,g')$.
\begin{enumerate}
	\item Note
	\begin{align*}
		c(gg',g'') &= \left[\prod_{1\le j<i\le m}g_ig'_ig''_j\beta_{ij}^{(x_ic_j)}\right]\left[\prod_{i=1}^mg_ig'_ig''_i\alpha_i^{\floor{\frac{x_i+c_i}{n_i}}}\right] \\
		&= \left[\prod_{1\le j<i\le m}g_ig'_ig''_j\beta_{ij}^{(a_i+b_i,c_j)}\cdot g_ig'_ig''_j\left(\frac{\sigma_j^{c_j}\alpha_i}{\alpha_i}\right)^{u_i}\right]\left[\prod_{i=1}^mg_ig'_ig''_i\alpha_i^{\floor{\frac{x_i+c_i}{n_i}}}\right] \\
		&= \left[\prod_{1\le j<i\le m}g_ig'_ig''_j\beta_{ij}^{(a_i+b_i,c_j)}\right]\left[\prod_{1\le j<i\le m}g_ig'_ig''_j\left(\frac{\sigma_j^{c_j}\alpha_i}{\alpha_i}\right)^{u_i}\right]\left[\prod_{i=1}^mg_ig'_ig''_i\alpha_i^{\floor{\frac{x_i+c_i}{n_i}}}\right],
	\end{align*}
	so we set
	\[R_3\coloneqq\left[\prod_{1\le j<i\le m}g_ig'_ig''_j\left(\frac{\sigma_j^{c_j}\alpha_i}{\alpha_i}\right)^{u_i}\right]\left[\prod_{i=1}^mg_ig'_ig''_i\alpha_i^{\floor{\frac{x_i+c_i}{n_i}}}\right].\]
	\item Note
	\[c(g,g') = \left[\prod_{1\le j<i\le m}g_ig'_j\beta_{ij}^{(a_ib_j)}\right]\left[\prod_{i=1}^mg_ig'_i\alpha_i^{u_i}\right],\]
	so we set
	\[R_4\coloneqq\left[\prod_{i=1}^mg_ig'_i\alpha_i^{u_i}\right].\]
	\item Lastly, we collect our remainder terms. Observe
	\begin{align*}
		R_3 &= \left[\prod_{i=1}^mg_ig'_i\Bigg(\prod_{j=1}^{i-1}g''_j\cdot\frac{\sigma_j^{c_j}\alpha_i}{\alpha_i}\Bigg)^{u_i}\right]\left[\prod_{i=1}^mg_ig'_ig''_i\alpha_i^{\floor{\frac{x_i+c_i}{n_i}}}\right] \\
		&= \left[\prod_{i=1}^mg_ig'_i\Bigg(\prod_{j=1}^{i-1}\frac{(\sigma_1^{c_1}\cdots\sigma_{j-1}^{c_{j-1}})\sigma_j^{c_j}\alpha_i}{(\sigma_1^{c_1}\cdots\sigma_{j-1}^{c_{j-1}})\alpha_i}\Bigg)^{u_i}\right]\left[\prod_{i=1}^mg_ig'_ig''_i\alpha_i^{\floor{\frac{x_i+c_i}{n_i}}}\right] \\
		&= \left[\prod_{i=1}^mg_ig'_i\Bigg(\prod_{j=1}^{i-1}\frac{g''_{j+1}\alpha_i}{g''_j\alpha_i}\Bigg)^{u_i}\right]\left[\prod_{i=1}^mg_ig'_ig''_i\alpha_i^{\floor{\frac{x_i+c_i}{n_i}}}\right] \\
		&= \left[\prod_{i=1}^mg_ig'_i\cdot\frac{g''_i\alpha_i^{u_i}}{\alpha_i^{u_i}}\right]\left[\prod_{i=1}^mg_ig'_ig''_i\alpha_i^{\floor{\frac{x_i+c_i}{n_i}}}\right].
	\end{align*}
	Thus,
	\begin{align*}
		R_3R_4 &= \left[\prod_{i=1}^mg_ig'_i\cdot\frac{g''_i\alpha_i^{u_i}}{\alpha_i^{u_i}}\right]\left[\prod_{i=1}^mg_ig'_ig''_i\alpha_i^{\floor{\frac{x_i+c_i}{n_i}}}\right]\left[\prod_{i=1}^mg_ig'_i\alpha_i^{u_i}\right] \\
		&= \prod_{i=1}^mg_ig'_ig''_i\alpha_i^{u_i+\floor{\frac{x_i+c_i}{n_i}}},
	\end{align*}
	which is again simple enough for our purposes.
\end{enumerate}
We now note that, for each $i$,
\[u_i+\floor{\frac{x_i+c_i}{n_i}}=\floor{\frac{a_i+b_i+c_i}{n_i}}=v_i+\floor{\frac{a_i+y_i}{n_i}}\]
by how carried addition behaves. It follows that
\[R_1R_2=\prod_{i=1}^mg_ig'_ig''_i\alpha_i^{v_i+\floor{\frac{a_i+y_i}{n_i}}}=\prod_{i=1}^mg_ig'_ig''_i\alpha_i^{u_i+\floor{\frac{x_i+c_i}{n_i}}}=R_3R_4.\]
Thus, it suffices to show that
\[\frac{gc(g',g'')}{R_1}\cdot\frac{c(g,g'')}{R_2}\stackrel?=\frac{c(gg',g'')}{R_3}\cdot\frac{c(g,g')}{R_4},\]
which is equivalent to
\[g\left[\prod_{1\le j<i\le m}g_i'g''_j\beta_{ij}^{(b_ic_j)}\right]\cdot\left[\prod_{1\le j<i\le m}g_ig'_jg''_j\beta_{ij}^{(a_i,b_j+c_j)}\right]\stackrel?=\left[\prod_{1\le j<i\le m}g_ig'_ig''_j\beta_{ij}^{(a_i+b_i,c_j)}\right]\cdot\left[\prod_{1\le j<i\le m}g_ig'_j\beta_{ij}^{(a_ib_j)}\right]\]
by the work above.

\subsection{Finishing}
We need to verify that
\[g\left[\prod_{1\le j<i\le m}g_i'g''_j\beta_{ij}^{(b_ic_j)}\right]\cdot\left[\prod_{1\le j<i\le m}g_ig'_jg''_j\beta_{ij}^{(a_i,b_j+c_j)}\right]\stackrel?=\left[\prod_{1\le j<i\le m}g_ig'_ig''_j\beta_{ij}^{(a_i+b_i,c_j)}\right]\cdot\left[\prod_{1\le j<i\le m}g_ig'_j\beta_{ij}^{(a_ib_j)}\right]\]
as discussed in the previous subsection.

Before beginning the check, we recall the relations on the $\beta$s from \autoref{eq:betarelations} can be written as
\[\frac{\sigma_2(\beta_{31})}{\beta_{31}}=\frac{\sigma_1(\beta_{32})}{\beta_{32}}\cdot\frac{\sigma_3(\beta_{21})}{\beta_{21}},\]
because we only have one triple $(i,j,k)$ of indices with $i>j>k$. This is somewhat difficult to deal with directly, so we quickly show a more general version.
\begin{lemma} \label{lem:betterbetarelation}
	Fix indices with $i>j>k$, and let $a_i,a_j,a_k\ge0$. Then
	\[\frac{\sigma_j^{a_j}\beta_{ik}^{(a_ia_k)}}{\beta_{ik}^{(a_ia_k)}}=\frac{\sigma_k^{a_k}\beta_{ij}^{(a_ia_j)}}{\beta_{ij}^{(a_ia_j)}}\cdot\frac{\sigma_i^{a_i}\beta_{jk}^{(a_ja_k)}}{\beta_{jk}^{(a_ja_k)}}.\]
\end{lemma}
\begin{proof}
	We simply compute
	\begin{align*}
		\frac{\sigma_i^{a_i}\beta_{jk}^{(a_ja_k)}}{\beta_{jk}^{(a_ja_k)}}\cdot\frac{\sigma_k^{a_k}\beta_{ij}^{(a_ia_j)}}{\beta_{ij}^{(a_ia_j)}} &= \prod_{r=0}^{a_i-1}\frac{\sigma_i^{r+1}\beta_{jk}^{(a_ja_k)}}{\sigma_i^r\beta_{jk}^{(a_ja_k)}}\cdot\prod_{p=0}^{a_k-1}\frac{\sigma_k^{p+1}\beta_{ij}^{(a_ia_j)}}{\sigma_k^p\beta_{ij}^{(a_ia_j)}} \\
		&= \prod_{p=0}^{a_k-1}\prod_{q=0}^{a_j-1}\prod_{r=0}^{a_i-1}\left(\frac{\sigma_k^p\sigma_j^q\sigma_i^{r+1}\beta_{jk}}{\sigma_k^p\sigma_j^q\sigma_i^r\beta_{jk}}\cdot\frac{\sigma_k^{p+1}\sigma_j^q\sigma_i^r\beta_{ij}}{\sigma_k^p\sigma_j^q\sigma_i^r\beta_{ij}}\right) \\
		&= \prod_{p=0}^{a_k-1}\prod_{q=0}^{a_j-1}\prod_{r=0}^{a_i-1}\sigma_k^p\sigma_j^q\sigma_i^r\left(\frac{\sigma_i\beta_{jk}}{\beta_{jk}}\cdot\frac{\sigma_k\beta_{ij}}{\beta_{ij}}\right) \\
		&= \prod_{p=0}^{a_k-1}\prod_{q=0}^{a_j-1}\prod_{r=0}^{a_i-1}\sigma_k^p\sigma_j^q\sigma_i^r\left(\frac{\sigma_j\beta_{ik}}{\beta_{ik}}\right),
	\end{align*}
	where in the last equality we have use the relation on the $\beta$s. Continuing,
	\begin{align*}
		\frac{\sigma_i^{a_i}\beta_{jk}^{(a_ja_k)}}{\beta_{jk}^{(a_ja_k)}}\cdot\frac{\sigma_k^{a_k}\beta_{ij}^{(a_ia_j)}}{\beta_{ij}^{(a_ia_j)}} &= \prod_{q=0}^{a_j-1}\left(\prod_{p=0}^{a_k-1}\prod_{r=0}^{a_i-1}\frac{\sigma_j^{q+1}\sigma_k^p\sigma_i^r\beta_{ik}}{\sigma_j^q\sigma_k^p\sigma_i^r\beta_{ik}}\right) \\
		&= \prod_{q=0}^{a_j-1}\frac{\sigma_j^{q+1}\beta_{ik}^{(a_ia_k)}}{\sigma_j^q\beta_{ik}^{(a_ia_k)}} \\
		&= \frac{\sigma_j^{a_j}\beta_{ik}^{(a_ia_k)}}{\beta_{ik}^{(a_ia_k)}},
	\end{align*}
	which is what we wanted.
\end{proof}
We now proceed with the check, by induction. More precisely, we claim that any $m'\le m$ gives
\[g_{m'+1}\left[\prod_{j<i\le m'}g_i'g''_j\beta_{ij}^{(b_ic_j)}\right]\left[\prod_{j<i\le m'}g_ig'_jg''_j\beta_{ij}^{(a_i,b_j+c_j)}\right]\stackrel?=\left[\prod_{j<i\le m'}g_ig'_ig''_j\beta_{ij}^{(a_i+b_i,c_j)}\right]\left[\prod_{j<i\le m'}g_ig'_j\beta_{ij}^{(a_ib_j)}\right]\]
which we will show by induction on $m'$. For $m'=1$, there is nothing to say because there are no indices $i>j$.

So now suppose we have equality for $m'<m$, and we give equality for $m''\coloneqq m'+1$. That is, we want to show that
\[g_{m'+2}\prod_{j<i\le m'+1}g_i'g''_j\beta_{ij}^{(b_ic_j)}\cdot\prod_{j<i\le m'+1}g_ig'_jg''_j\beta_{ij}^{(a_i,b_j+c_j)}\stackrel?=\prod_{j<i\le m'+1}g_ig'_ig''_j\beta_{ij}^{(a_i+b_i,c_j)}\cdot\prod_{j<i\le m'+1}g_ig'_j\beta_{ij}^{(a_ib_j)}\]
but by the inductive hypothesis it suffices for
\[\frac{\displaystyle g_{m''+1}\prod_{j<i\le m'+1}g_i'g''_j\beta_{ij}^{(b_ic_j)}}{\displaystyle g_{m'+1}\prod_{j<i\le m'}g_i'g''_j\beta_{ij}^{(b_ic_j)}}\cdot
\frac{\displaystyle\prod_{j<i\le m'+1}g_ig'_jg''_j\beta_{ij}^{(a_i,b_j+c_j)}}{\displaystyle\prod_{j<i\le m'}g_ig'_jg''_j\beta_{ij}^{(a_i,b_j+c_j)}}
\stackrel?=
\frac{\displaystyle\prod_{j<i\le m'+1}g_ig'_ig''_j\beta_{ij}^{(a_i+b_i,c_j)}}{\displaystyle\prod_{j<i\le m'}g_ig'_ig''_j\beta_{ij}^{(a_i+b_i,c_j)}}\cdot
\frac{\displaystyle\prod_{j<i\le m'+1}g_ig'_j\beta_{ij}^{(a_ib_j)}}{\displaystyle\prod_{j<i\le m'}g_ig'_j\beta_{ij}^{(a_ib_j)}}\]
which is collapses to
\[\frac{\displaystyle g_{m''+1}\prod_{j<i\le m'+1}g_i'g''_j\beta_{ij}^{(b_ic_j)}}{\displaystyle g_{m'+1}\prod_{j<i\le m'}g_i'g''_j\beta_{ij}^{(b_ic_j)}}\cdot
\prod_{j\le m'}g_{m''}g'_jg''_j\beta_{m''j}^{(a_{m''},b_j+c_j)}
\stackrel?=
\prod_{j\le m'}g_{m''}g'_{m''}g''_j\beta_{m''j}^{(a_{m''}+b_{m''},c_j)}\cdot
\displaystyle\prod_{j\le m'}g_{m''}g'_j\beta_{ij}^{(a_{m''}b_j)}\]
because the terms with $i<m''=m'+1$ got cancelled in the rightmost three products. Rearranging, this is the same as
\[\frac{\displaystyle g_{m''+1}\prod_{j<i\le m'+1}g_i'g''_j\beta_{ij}^{(b_ic_j)}}{\displaystyle g_{m'+1}\prod_{j<i\le m'}g_i'g''_j\beta_{ij}^{(b_ic_j)}}
\stackrel?=
\frac{\displaystyle\prod_{j<m''}g_{m''}g'_{m''}g''_j\beta_{m''j}^{(a_{m''}+b_{m''},c_j)}\cdot
\displaystyle\prod_{j<m''}g_{m''}g'_j\beta_{m''j}^{(a_{m''}b_j)}}
{\displaystyle\prod_{j<m''}g_{m''}g'_jg''_j\beta_{m''j}^{(a_{m''},b_j+c_j)}}.\]
Peeling off the $i=m''=m'+1$ terms from the left-hand side numerator, we're showing
\[\frac{\displaystyle g_{m''+1}\prod_{j<i\le m'}g_i'g''_j\beta_{ij}^{(b_ic_j)}}{\displaystyle g_{m'+1}\prod_{j<i\le m'}g_i'g''_j\beta_{ij}^{(b_ic_j)}}
\stackrel?=
\frac{\displaystyle\prod_{j<m''}g_{m''}g'_{m''}g''_j\beta_{m''j}^{(a_{m''}+b_{m''},c_j)}\cdot
\displaystyle\prod_{j<m''}g_{m''}g'_j\beta_{m''j}^{(a_{m''}b_j)}}
{\displaystyle\prod_{j<m''}g_{m''+1}g_{m''}'g''_j\beta_{m''j}^{(b_{m''}c_j)}\cdot
\prod_{j<m''}g_{m''}g'_jg''_j\beta_{m''j}^{(a_{m''},b_j+c_j)}}.\]
We take a moment to simplify the left-hand side with \autoref{lem:betterbetarelation} by writing
\begin{align*}
	g_{m'+1}\prod_{j<i\le m'}g_i'g''_j\left(\frac{\sigma_{m''}^{a_{m''}}\beta_{ij}^{(b_ic_j)}}{\beta_{ij}^{(b_ic_j)}}\right) &= g_{m''}\prod_{j<i\le m'}g_i'g''_j\left(\frac{\sigma_i^{b_i}\beta_{m''j}^{(a_{m''}c_j)}}{\beta_{m''j}^{(a_{m''}c_j)}}\cdot\frac{\beta_{m''i}^{(a_{m''}b_i)}}{\sigma_j^{c_j}\beta_{m''i}^{(a_{m''}b_i)}}\right) \\
	&= g_{m''}\left[\prod_{j=1}^{m'}g''_j\prod_{i=j+1}^{m'}g_i'\left(\frac{\sigma_i^{b_i}\beta_{m''j}^{(a_{m''}c_j)}}{\beta_{m''j}^{(a_{m''}c_j)}}\right)\cdot
	\prod_{i=1}^{m'}g_i'\prod_{j=1}^{i-1}g_j''\left(\frac{\beta_{m''i}^{(a_{m''}b_i)}}{\sigma_j^{c_j}\beta_{m''i}^{(a_{m''}b_i)}}\right)\right] \\
	&= g_{m''}\left[\prod_{j=1}^{m'}\frac{g'_{m'+1}g''_j\beta_{m''j}^{(a_{m''}c_j)}}{g'_{j+1}g''_j\beta_{m''j}^{(a_{m''}c_j)}}\cdot
	\prod_{i=1}^{m'}\frac{g_i'\beta_{m''i}^{(a_{m''}b_i)}}{g_i'g_i''\beta_{m''i}^{(a_{m''}b_i)}}\right] \\
	&= g_{m''}\left[\prod_{j<m''}\frac{g'_{m''}g''_j\beta_{m''j}^{(a_{m''}c_j)}}{g'_{j+1}g''_j\beta_{m''j}^{(a_{m''}c_j)}}\cdot
	\prod_{j<m''}\frac{g_j'\beta_{m''j}^{(a_{m''}b_j)}}{g_j'g_j''\beta_{m''j}^{(a_{m''}b_j)}}\right]
\end{align*}
after doing a lot of telescoping. Now, we can remove $g_{m''}$ everywhere to give
\[\prod_{j<m''}\frac{g'_{m''}g''_j\beta_{m''j}^{(a_{m''}c_j)}}{g'_{j+1}g''_j\beta_{m''j}^{(a_{m''}c_j)}}\cdot
\prod_{j<m''}\frac{g_j'\beta_{m''j}^{(a_{m''}b_j)}}{g_j'g_j''\beta_{m''j}^{(a_{m''}b_j)}}
\stackrel?=
\frac{\displaystyle\prod_{j<m''}g'_{m''}g''_j\beta_{m''j}^{(a_{m''}+b_{m''},c_j)}\cdot
\displaystyle\prod_{j<m''}g'_j\beta_{m''j}^{(a_{m''}b_j)}}
{\displaystyle\prod_{j<m''}g'_{m''+1}g''_j\beta_{m''j}^{(b_{m''}c_j)}\cdot
\prod_{j<m''}g'_jg''_j\beta_{m''j}^{(a_{m''},b_j+c_j)}},\]
or
\[\prod_{j<m''}\frac{g'_{m''}g''_j\beta_{m''j}^{(a_{m''}c_j)}}{g'_{j+1}g''_j\beta_{m''j}^{(a_{m''}c_j)}}
\stackrel?=
\frac{\displaystyle\prod_{j<m''}g'_{m''}g''_j\beta_{m''j}^{(a_{m''}+b_{m''},c_j)}\cdot
\displaystyle\prod_{j<m''}g'_jg''_j\beta_{m''j}^{(a_{m''}b_j)}}
{\displaystyle\prod_{j<m''}g'_{m''+1}g''_j\beta_{m''j}^{(b_{m''}c_j)}\cdot
\prod_{j<m''}g'_jg''_j\beta_{m''j}^{(a_{m''},b_j+c_j)}}.\]
Rearranging, we want
\[\prod_{j<m''}
\frac{g'_jg''_j\beta_{m''j}^{(a_{m''},b_j+c_j)}}
{g'_jg''_j\beta_{m''j}^{(a_{m''}b_j)}\cdot
g'_{j+1}g''_j\beta_{m''j}^{(a_{m''}c_j)}}
\stackrel?=\prod_{j<m''}
\frac{g'_{m''}g''_j\beta_{m''j}^{(a_{m''}+b_{m''},c_j)}}
{g'_{m''}g''_j\beta_{m''j}^{(a_{m''}c_j)}\cdot
g'_{m''+1}g''_j\beta_{m''j}^{(b_{m''}c_j)}},\]
which is
\[\prod_{j<m''}
g'_jg''_j\left(\frac{\beta_{m''j}^{(a_{m''},b_j+c_j)}}
{\beta_{m''j}^{(a_{m''}b_j)}\cdot
\sigma_j^{b_j}\beta_{m''j}^{(a_{m''}c_j)}}\right)
\stackrel?=\prod_{j<m''}
g'_{m''}g''_j\left(\frac{\beta_{m''j}^{(a_{m''}+b_{m''},c_j)}}
{\beta_{m''j}^{(a_{m''}c_j)}\cdot
\sigma_{m''}^{a_{m''}}\beta_{m''j}^{(b_{m''}c_j)}}\right).\]
However, by definition of the $\beta_{ij}^{(xy)}$, we see that
\[\frac{\beta_{m''j}^{(a_{m''},b_j+c_j)}}
{\beta_{m''j}^{(a_{m''}b_j)}\cdot
\sigma_j^{b_j}\beta_{m''j}^{(a_{m''}c_j)}}=\frac{\beta_{m''j}^{(a_{m''}+b_{m''},c_j)}}
{\beta_{m''j}^{(a_{m''}c_j)}\cdot
\sigma_{m''}^{a_{m''}}\beta_{m''j}^{(b_{m''}c_j)}}=1,\]
so everything does indeed cancel out properly. This completes the check.

\end{document}