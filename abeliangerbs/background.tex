% !TEX root = ../abeliangerbs.tex

In this section, we familiarize ourselves with various tools used throughout the paper.

\subsection{Group Cohomology}

\subsubsection{Definitions}
Fix $G$ to be a group. We take a moment to review some of the group cohomology will be used in the paper. There is a unique sequence of functors $H^i(G,-)\colon\mathrm{Mod}_G\to\mathrm{Ab}$ for $i\in\NN$ satisfying the following set of properties.
\begin{itemize}
	\item $H^0(G,-)=\op{Hom}_{\ZZ[G]}(\ZZ,-)=(-)^G$.
	\item $H^i(G,I)=0$ for all $i>1$ and injective modules $I$.
	\item There is a functor taking short exact sequences
	\[0\to A\to B\to C\to 0\]
	of $G$-modules to long exact sequences
	\[0\to H^0(G,A)\to H^0(G,B)\to H^0(G,C)\to H^1(G,A)\to H^1(G,B)\to H^1(G,C)\to H^2(G,A)\to\cdots.\]
\end{itemize}
The functors $H^i(G,-)$ are the cohomology functors. Analogously, there is a unique sequence of functors $H_i(G,-)\colon\mathrm{Mod}_G\to\mathrm{Ab}$ for $i\in\NN$ satisfying the following set of properties.
\begin{itemize}
	\item $H_0(G,-)=\ZZ\otimes_{\ZZ[G]}-$.
	\item $H_i(G,P)=0$ for all $i>1$ and projective modules $P$.
	\item There is a functor taking short exact sequences
	\[0\to A\to B\to C\to 0\]
	of $G$-modules to long exact sequences
	\[\cdots\to H_2(G,C)\to H_1(G,A)\to H_1(G,B)\to H_1(G,C)\to H_0(G,A)\to H_0(G,B)\to H_0(G,C)\to0.\]
\end{itemize}
When $G$ is a finite group, it turns out that we can tie these together by defining Tate cohomology: define for a $G$-module $A$, define
\[\widehat H^i(G,A)\coloneqq\begin{cases}
	H^i(G,A) & i\ge1, \\
	A^G/\im N_G & i=0, \\
	\ker N_G/I_GA & i=-1, \\
	H_{-i-1}(G,A) & i\le-2,
\end{cases}\]
where $N_G\colon A\to A$ is the norm map, and $I_G$ is the kernel of the augmentation map $\varepsilon\colon\ZZ[G]\to G$ sending $\varepsilon\colon g\mapsto1$ for each $g\in G$. Then we have the following.
\begin{theorem}[{\cite[Theorem~3]{atiyah-wall}}]
	Let $TG$ be a finite group. There is a functor taking short exact sequences
	\[0\to A\to B\to C\to 0\]
	of $G$-modules to (very) long exact sequences
	\[\cdots\to\widehat H^{-1}(G,A)\to\widehat H^{-1}(G,B)\to\widehat H^{-1}(G,C)\to\widehat H^0(G,A)\to\widehat H^0(G,B)\to\widehat H^0(G,C)\to\cdots.\]
\end{theorem}
Throughout the paper, we will essentially exclusively assume that $G$ is finite and will thus use Tate cohomology unless explicitly stated otherwise.

\subsubsection{The Bar Resolution} \label{sec:barres}
% To actually compute $H^i(G,A)$ for $i\ge0$, we can use the bar resolution \cite[p.~96]{atiyah-wall}: set $P_i\coloneqq\ZZ[G^{i+1}]$ and define the free resolution of $\ZZ$
% \begin{equation}
% 	\cdots\to P_3\stackrel {d^3}\to P_2\stackrel {d^2}\to P_1\stackrel {d^1}\to P_0\stackrel\varepsilon\to\ZZ\to0 \label{eq:barresolution}
% \end{equation}
% by letting $\varepsilon\colon\ZZ[G]\to\ZZ$ be the augmentation map and $d^{i+1}\colon P^{i+1}\to P_i$ be defined by
% \[d(g_0,\ldots,g_{i+1})\coloneqq\sum_{j=0}^{i+1}(-1)^j(g_0,\ldots,g_{j-1},g_{j+1},\ldots,g_{i+1}).\]
% One can check that \autoref{eq:barresolution} is in fact a free resolution of $\ZZ$, and then we define the complex
% \[0\to\op{Hom}_\ZZ(\ZZ,A)\stackrel{\varepsilon^*}\to\op{Hom}_\ZZ(P_0,A)\stackrel{(d^1)^*}\to\op{Hom}_\ZZ(P_1,A)\stackrel{(d^2)^*}\op{Hom}_\ZZ(P_2,A)\to\cdots.\]
To actually compute group cohomology, one can use the bar resolution. We will not need the full bar resolution for Tate cohomology except in a few circumstances, so we will content ourselves with describing $H^1(G,A)$ and $H^2(G,A)$ for a $G$-module $A$, and we will say explicitly when we need to refer to the full standard complex from \cite{atiyah-wall}.

We have the following definitions.
\begin{definition}
	Fix a group $G$ and $G$-module $A$. Then a \textit{$1$-cocycle} is a function $f\colon G\to A$ satisfying the relation
	\[f(gg')=f(g)+g\cdot f(g')\]
	for each $g,g'\in G$. The set of $1$-cocycles is denoted $Z^1(G,A)$.
\end{definition}
\begin{example}
	Let $G$ act on an abelian group $A$ trivially. Then $Z^1(G,A)=\op{Hom}_\ZZ(G,A)$.
\end{example}
\begin{definition}
	Fix a group $G$ and $G$-module $A$. Then a \textit{$1$-coboundary} is a function $f\colon G\to A$ such that there exists $a\in A$ such that
	\[f(g)=(g-1)\cdot a\]
	for each $g\in G$. The set of $1$-coboundaries is denoted $B^1(G,A)$.
\end{definition}
One can check that $B^1(G,A)\subseteq Z^1(G,A)$, and it is a fact that
\[H^1(G,A)\cong Z^1(G,A)/B^1(G,A).\]
There is a similar description for $H^2(G,A)$.
\begin{definition}
	Fix a group $G$ and $G$-module $A$. Then a \textit{$2$-cocycle} is a function $f\colon G^2\to A$ satisfying the relation
	\[g\cdot f(g',g'')+f(g,g'g'')=f(g,g')+f(gg',g'')\]
	for each $g,g',g''\in G$. The set of $2$-coboundaries is denoted $Z^2(G,A)$.
\end{definition}
\begin{example}
	If $G$ is cyclic of order $n$ generated by $\sigma\in G$, then any $a\in A$ can define the $2$-cocycle
	\[f(\sigma^i,\sigma^j)\coloneqq\floor{\frac{i+j}n}\]
	where $0\le i,j<n$.
\end{example}
\begin{definition}
	Fix a group $G$ and $G$-module $A$. Then a \textit{$2$-coboundary} is a function $f\colon G^2\to A$ such that there exists $b\colon G\to A$ with
	\[f(g,g')=gb(g')-b(gg')+b(g')\]
	for each $g,g'\in G$. The set of $2$-cobounaries is denoted $B^2(G,A)$.
\end{definition}
Again, one can check that $B^2(G,A)\subseteq Z^2(G,A)$, and it is again a fact that
\[H^2(G,A)\cong Z^2(G,A)/B^2(G,A).\]
These descriptions will suffice for us, for the most part.

\subsubsection{Change of Group}
Let $G$ be a finite group and $A$ a $G$-module. Given a morphism $f\colon A\to B$ of $G$-modules, we know that we induce a morphism
\[\widehat H^i(G,f)\colon\widehat H^i(G,A)\to\widehat H^i(G,B)\]
because $\widehat H^i(G,-)$ is a functor. It will benefit us somewhat to be able to change the group here as well.

For most of the paper, we will only need two change-of-group morphisms. Observe that, given a subgroup $H\subseteq G$, we can take a $1$-cocycle $f\colon G\to A$ and restrict it to $f|_H$. Additionally, $1$-coboundaries $G$ restrict to $1$-cobounaries of $H$, so we have induced a morphism
\[\op{Res}\colon H^1(G,A)\to H^1(H,A).\]
A similar story works for defining the map $\op{Res}\colon H^2(G,A)\to H^2(H,A)$, and in fact one can define for all $i\in\ZZ$ a morphism
\[\op{Res}\colon\widehat H^i(G,A)\to\widehat H^i(H,A)\]
by extending the same approach.

Next, fix a normal subgroup $H\subseteq G$. Then given a $G$-module $A$, we see that $A^H$ is a $G/H$-module. Now, we can take a $1$-cocycle $f\colon G/H\to A^H$ and then define the composite
\[G\onto G/H\stackrel f\to A^H\into A\]
to be a $1$-cocycle in $Z^1(G,A)$. As before, this will induce a map
\[\op{Inf}\colon H^1\left(G/H,A^H\right)\to H^1(G,A).\]
And we also get to extend this morphism to all indices $i\in\ZZ$ as
\[\op{Inf}\colon\widehat H^i\left(G/H,A^H\right)\to\widehat H^i(G,A)\]
by extending this construction.

\subsubsection{Cup Products}
Let $G$ be a finite group. Given two $G$-modules $A$ and $B$, we can make $A\otimes_\ZZ B$ a $G$-module by letting $G$ acting diagonally. Now, by \cite[Theorem~4]{atiyah-wall} there is a unique family of cup-product morphisms
\[\cup\colon\widehat H^i(G,A)\otimes_\ZZ\widehat H^j(G,B)\to\widehat H^{i+j}(G,A\otimes_\ZZ B)\]
for all $G$-modules $A,B$ and $i,j\in\ZZ$ satisfying the following.
\begin{enumerate}
	\item The cup products $\cup$ are natural in $A$ and $B$.
	\item The cup product
	\[\cup\colon\widehat H^0(G,A)\otimes_\ZZ\widehat H^0(G,B)\to\widehat H^0(G,A\otimes_\ZZ B)\]
	is the natural one, induced by $A^G\otimes_\ZZ B^G\to(A\otimes_\ZZ B)^G$.
	\item Given an exact sequence
	\[0\to A\to B\to C\to 0\]
	of $G$-modules and a $G$-module $M$ such that
	\[0\to A\otimes_\ZZ M\to B\otimes_\ZZ M\to C\otimes_\ZZ M\to 0\]
	is also exact, our cup product commutes with $\delta$ morphisms in that
	\[(\delta c)\cup m=\delta(c\cup m)\in\widehat H^{i+j+1}(G,A\otimes_\ZZ M)\]
	for $c\in\widehat H^i(G,C)$ and $m\in\widehat H^j(G,M)$.
	\item Given an exact sequence
	\[0\to A\to B\to C\to 0\]
	of $G$-modules and a $G$-module $M$ such that
	\[0\to M\otimes_\ZZ A\to M\otimes_\ZZ B\to M\otimes_\ZZ C\to 0\]
	is also exact, our cup product commutes with $\delta$ morphisms in that
	\[m\cup(\delta c)=\delta(m\cup c)\in\widehat H^{i+j+1}(G,M\otimes_\ZZ A\otimes_\ZZ)\]
	for $m\in\widehat H^i(G,M)$ and $c\in\widehat H^j(G,C)$.
\end{enumerate}
There are explicit formulae for these cup products in terms of the standard resolution in \cite[p.~107]{atiyah-wall}, which we will occasionally reference.

Here are a few properties of cup products which we will use without citation.
\begin{proposition}[{\cite[Proposition~9]{atiyah-wall}}]
	Let $G$ be a finite group and $A$, $B$, and $C$ all $G$-modules. Then, for $a\in\widehat H^i(G,A)$ and $b\in\widehat H^j(G,B)$ and $c\in\widehat H^k(G,C)$, the following are true.
	\begin{itemize}
		\item $(a\cup b)\cup c=a\cup(b\cup c)$, where we have identified $(A\otimes_\ZZ B)\otimes_\ZZ C$ and $A\otimes_\ZZ(B\otimes_\ZZ C)$ in the obvious way.
		\item $a\cup b=(-1)^{ij}(b\cup a)$, where we have identified $A\otimes_\ZZ B$ and $B\otimes_\ZZ A$ in the obvious way.
		\item For a subgroup $H\subseteq G$, we have $\op{Res}(a\cup b)=(\op{Res}a)\cup(\op{Res}b)$.
	\end{itemize}
\end{proposition}

\subsubsection{Periodic Cohomology}
Some results from \autoref{sec:crackpot} will mirror the theory of periodic cohomology, so we take a moment to state the main theorem here. We have the following definition.
\begin{definition}
	A finite group $G$ has \textit{periodic cohomology} if and only if there is a natural isomorphism between the functors $\widehat H^i(G,-)$ and $\widehat H^{i+d}(G,-)$ for some $d\in\ZZ$ for each $i\in\ZZ$.
\end{definition}
Then one can show the following.
\begin{theorem}[{\cite[Theorems~VI.9.1, VI.9.5]{brown-cohomology}}]
	Let $G$ be a finite group. Then the following are equivalent.
	\begin{listalph}
		\item $G$ has periodic cohomology.
		\item There is a nonzero $i\in\ZZ$ such that $\widehat H^0(G,\ZZ)\cong\ZZ/\#G\ZZ$.
		\item There is a nonzero $i\in\ZZ$ and $x\in\widehat H^i(G,\ZZ)$ and $x^\lor\in\widehat H^{-i}(G,\ZZ)$ with
		\[x\cup x^\lor=x^\lor\cup x=[1]\in\widehat H^0(G,\ZZ).\]
		\item For some nonzero $i,d\in\ZZ$ and $x\in\widehat H^i(G,\ZZ)$, we have a natural isomorphism
		\[(x\cup-)\colon\widehat H^i(G,-)\Rightarrow\widehat H^{i+d}(G,\ZZ).\]
		\item All Sylow $p$-subgroups of $G$ are cyclic.
	\end{listalph}
\end{theorem}
\begin{example}
	If $G$ is cyclic of order $n$ generated by $\sigma$, then one can show that $G$ has $2$-periodic cohomology, in that
	\[(\chi\cup-)\colon\widehat H^i(G,-)\Rightarrow\widehat H^{i+2}(G,-)\]
	defines a natural isomorphism, where $\chi\in\widehat H^2(G,\ZZ)$ is represented by the $2$-cocycle
	\[\left(\sigma^i,\sigma^j\right)\mapsto\floor{\frac{i+j}n},\]
	where $0\le i,j<n$.
\end{example}
We will not prove this, but it is useful to note that these periodic cohomology theories all come from cup products and that they can be witnessed by an ``invertible'' element in the cohomology ring $\widehat H^\bullet(G,\ZZ)$. These themes will reoccur.
% state tate cohomology
% cup products
% a little on change of group
% explicit cocycles
% give shapiro's lemma
% induced modules?

\subsection{Group Extensions}
We continue with $G$ as a group and $A$ as a $G$-module. We have the following definition.
\begin{definition}
	Let $G$ be a group and $A$ a $G$-module. A \textit{group extension $\mc E$ of $G$ by $A$} is a short exact sequence
	\[0\to A\stackrel\iota\to\mc E\stackrel\pi\to G\to0\]
	such that any $a\in A$ and $w\in\mc E$ have
	\[\pi(w)\cdot\iota(a)=\iota\left(waw^{-1}\right).\]
\end{definition}
For example, Galois gerbs are group extensions.

An isomorphism of group extensions $\mc E_1\to\mc E_2$ is a morphism of the corresponding short exact sequences, as follows.
% https://q.uiver.app/?q=WzAsMTAsWzAsMCwiMCJdLFsxLDAsIkEiXSxbMiwwLCJcXG1jIEVfMSJdLFszLDAsIkciXSxbNCwwLCIwIl0sWzAsMSwiMCJdLFsxLDEsIkEiXSxbMiwxLCJcXG1jIEVfMiJdLFszLDEsIkciXSxbNCwxLCIwIl0sWzAsMV0sWzEsMl0sWzIsM10sWzMsNF0sWzUsNl0sWzYsN10sWzcsOF0sWzgsOV0sWzIsN10sWzEsNiwiIiwxLHsibGV2ZWwiOjIsInN0eWxlIjp7ImhlYWQiOnsibmFtZSI6Im5vbmUifX19XSxbMyw4LCIiLDEseyJsZXZlbCI6Miwic3R5bGUiOnsiaGVhZCI6eyJuYW1lIjoibm9uZSJ9fX1dXQ==&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
\[\begin{tikzcd}
	0 & A & {\mc E_1} & G & 0 \\
	0 & A & {\mc E_2} & G & 0
	\arrow[from=1-1, to=1-2]
	\arrow[from=1-2, to=1-3]
	\arrow[from=1-3, to=1-4]
	\arrow[from=1-4, to=1-5]
	\arrow[from=2-1, to=2-2]
	\arrow[from=2-2, to=2-3]
	\arrow[from=2-3, to=2-4]
	\arrow[from=2-4, to=2-5]
	\arrow[from=1-3, to=2-3]
	\arrow[Rightarrow, no head, from=1-2, to=2-2]
	\arrow[Rightarrow, no head, from=1-4, to=2-4]
\end{tikzcd}\]
By the Five lemma, all such morphisms must be isomorphisms of short exact sequences, which justify why these are isomorphisms of group extensions.

We have the following classification result.
\begin{theorem}[{\cite[Theorem~IV.3.12]{brown-cohomology}}] \label{thm:classifyextensionscohom}
	Let $G$ be a group and $A$ a $G$-module. Then isomorphism classes of group extensions $\mc E$ of $G$ by $A$ are in bijection with cohomology classes in $H^2(G,A)$.
\end{theorem}
\begin{proof}[Sketch]
	We will describe the maps from $2$-cocycles to group extensions and vice versa; that the maps are well-defined and provided the needed isomorphism are a matter of computation. In one direction, fix a group extension
	\[0\to A\stackrel\iota\to\mc E\stackrel\pi\to G\to0.\]
	Now, choose a set-theoretic lift $s\colon G\to\mc E$ of $\pi$, and it turns out that the function $c\colon G^2\to A$ given by
	\[c(g,h)\coloneqq s(g)s(h)s(gh)^{-1}\]
	defines a $2$-cocycle $c\in Z^2(G,A)$.

	In the other direction, fix a $2$-cocycle $c\in Z^2(G,A)$. Then we build the extension
	\[0\to A\stackrel\iota\to \mc E_c\stackrel\pi\to G\to 0\]
	as follows. As a set, $\mc E_c=A\times G$, with group law defined by
	\[(a,g)(a',g')\coloneqq\big(a+g\cdot a'+c(g,g'),gg'\big).\]
	The identity is $(-c(1,1),1)$. To finish, we define $\pi\colon\mc E_c\to G$ by projection and $\iota\colon A\to\mc E_c$ by $a\mapsto(a-c(1,1),1)$.
\end{proof}
The isomorphism of \autoref{thm:classifyextensionscohom} also behaves well with the functoriality of our cohomology groups. For example, a group homomorphism $\varphi\colon G\to H$ and $G$-module $A$ induces a map $H^2(H,A)\to H^2(G,A)$. On the side of group extensions, given a class $u\in H^2(H,A)$ corresponding to the group extension $\mc E$, we can construct $\mc E'$ corresponding to $\varphi(u)$ by pulling back as follows.
% https://q.uiver.app/?q=WzAsMTAsWzAsMCwiMCJdLFsxLDAsIkEiXSxbMiwwLCJcXG1jIEUiXSxbMSwxLCJBIl0sWzAsMSwiMCJdLFsyLDEsIlxcbWMgRSciXSxbMywwLCJIIl0sWzMsMSwiRyJdLFs0LDAsIjAiXSxbNCwxLCIwIl0sWzcsNiwiXFx2YXJwaGkiLDJdLFsxLDMsIiIsMCx7ImxldmVsIjoyLCJzdHlsZSI6eyJoZWFkIjp7Im5hbWUiOiJub25lIn19fV0sWzUsMiwiIiwyLHsic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoiZGFzaGVkIn19fV0sWzAsMV0sWzEsMl0sWzIsNl0sWzYsOF0sWzQsM10sWzMsNV0sWzUsN10sWzcsOV0sWzUsNiwiIiwyLHsic3R5bGUiOnsibmFtZSI6ImNvcm5lciJ9fV1d&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
\[\begin{tikzcd}
	0 & A & {\mc E} & H & 0 \\
	0 & A & {\mc E'} & G & 0
	\arrow["\varphi"', from=2-4, to=1-4]
	\arrow[Rightarrow, no head, from=1-2, to=2-2]
	\arrow[dashed, from=2-3, to=1-3]
	\arrow[from=1-1, to=1-2]
	\arrow[from=1-2, to=1-3]
	\arrow[from=1-3, to=1-4]
	\arrow[from=1-4, to=1-5]
	\arrow[from=2-1, to=2-2]
	\arrow[from=2-2, to=2-3]
	\arrow[from=2-3, to=2-4]
	\arrow[from=2-4, to=2-5]
	\arrow["\lrcorner"{anchor=center, pos=0.125, rotate=90}, draw=none, from=2-3, to=1-4]
\end{tikzcd}\]
Similarly, a $G$-module homomorphism $f\colon A\to B$ induces a map $H^2(G,A)\to H^2(G,B)$. On the side of group extensions, given a class $u\in H^2(G,A)$ corresponding to the group extension $\mc E$, we can construct $\mc E'$ corresponding to $f(u)$ by pushing out as follows.
% https://q.uiver.app/?q=WzAsMTAsWzAsMCwiMCJdLFsxLDAsIkEiXSxbMiwwLCJcXG1jIEUiXSxbMywwLCJHIl0sWzQsMCwiMCJdLFszLDEsIkciXSxbNCwxLCIwIl0sWzAsMSwiMCJdLFsxLDEsIkIiXSxbMiwxLCJcXG1jIEUnIl0sWzAsMV0sWzEsOCwiZiJdLFsxLDJdLFs4LDldLFsyLDksIiIsMSx7InN0eWxlIjp7ImJvZHkiOnsibmFtZSI6ImRhc2hlZCJ9fX1dLFs5LDEsIiIsMSx7InN0eWxlIjp7Im5hbWUiOiJjb3JuZXIifX1dLFs3LDhdLFsyLDNdLFs5LDVdLFs1LDZdLFszLDRdLFszLDUsIiIsMSx7ImxldmVsIjoyLCJzdHlsZSI6eyJoZWFkIjp7Im5hbWUiOiJub25lIn19fV1d&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
\[\begin{tikzcd}
	0 & A & {\mc E} & G & 0 \\
	0 & B & {\mc E'} & G & 0
	\arrow[from=1-1, to=1-2]
	\arrow["f", from=1-2, to=2-2]
	\arrow[from=1-2, to=1-3]
	\arrow[from=2-2, to=2-3]
	\arrow[dashed, from=1-3, to=2-3]
	\arrow["\lrcorner"{anchor=center, pos=0.125, rotate=180}, draw=none, from=2-3, to=1-2]
	\arrow[from=2-1, to=2-2]
	\arrow[from=1-3, to=1-4]
	\arrow[from=2-3, to=2-4]
	\arrow[from=2-4, to=2-5]
	\arrow[from=1-4, to=1-5]
	\arrow[Rightarrow, no head, from=1-4, to=2-4]
\end{tikzcd}\]

\subsection{Class Field Theory}
For our purposes, class field theory will be used to be able to describe certain cohomology groups associated to local and global fields.

\subsubsection{Local Class Field Theory}
We begin with the local story. Let $L/K$ be a finite Galois extension of  degree $n$ and Galois group $G\coloneqq\op{Gal}(L/K)$. Because we are interested in extensions, we begin with what $H^2\left(G,L^\times\right)$ looks like.
\begin{theorem}[{\cite[Lemma~III.2.2]{milne-cft}}]
	Let $L/K$ be a Galois extension of local fields of degree $n$ and Galois group $G\coloneqq\op{Gal}(L/K)$. Then there is a canonical isomorphism
	\[\op{inv}\colon H^2\left(G,L^\times\right)\to{\textstyle\frac1n}\ZZ/\ZZ.\]
\end{theorem}
The element of $H^2(G,L^\times)$ corresponding to $\frac1n$ deserves a name.
\begin{definition}
	Let $L/K$ be a Galois extension of local fields of degree $n$ and Galois group $G\coloneqq\op{Gal}(L/K)$. Then the \textit{local fundamental class} $u_{L/K}$ is the class in $H^2\left(G,L^\times\right)$ with
	\[\op{inv}u_{L/K}=1/n.\]
\end{definition}
The local fundamental class satisfies a number of good functoriality properties.
\begin{proposition}[{\cite[Lemma~III.2.7]{milne-cft}}] \label{prop:functorialfundclass}
	Let $M/L/K$ be a tower of finite local field extensions where $M/K$ is Galois. Then
	\[\op{Res}u_{M/K}=u_{M/L}.\]
	If $L/K$ is also Galois, then
	\[\op{Inf}u_{L/K}=[M:L]u_{M/K}.\]
\end{proposition}
With the machinery in place, we might as well mention the local Artin reciprocity map.
\begin{theorem}[{\cite[Theorem~III.3.1]{milne-cft}}]
	Let $L/K$ be a finite Galois extension of local fields with Galois group $G$. Then the map
	\[(u_{L/K}\cup-)\colon\widehat H^i(G,\ZZ)\to\widehat H^{i+2}\left(G,L^\times\right)\]
	is an isomorphism for all $i\in\ZZ$.
\end{theorem}
\begin{remark}
	More generally, if $T$ is an algebraic $K$-torus which splits over $L$, then the map
	\[(u_{L/K}\cup-)\colon\widehat H^i(G,X_*(T))\to\widehat H^{i+2}\left(G,L^\times\right)\]
	is an isomorphism for all $i\in\ZZ$; see \cite[Theorem~6.2]{alg-tori}.
\end{remark}

\subsubsection{Global Class Field Theory}
We now turn to the global story. Given a global field $K$, we let $V_K$ denote its set of places.

Let $L/K$ be a finite Galois extension of global fields of degree $n$ and Galois group $G\coloneqq\op{Gal}(L/K)$. To be able to make class field theory, we need to fix the correct objects.
\begin{definition}
	Given a global field $K$, we define the \textit{ring of adel\'es} to be the restricted direct product
	\[\AA_K\coloneqq\prod_{v\in V_K}(K_v,\mathcal O_v).\]
	Namely, we are considering infinite tuples $(a_v)_{v\in V_K}$, where $a_v\in K_v$ for each $v\in V_K$ but $v\in\mathcal O_v$ for all but finitely many $v\in V_K$.
\end{definition}
Observe that there is a natural embedding $K\into\AA_K$ by
\[a\mapsto(a)_{v\in V_K}.\]
This embedding descends to an embedding $K^\times\into\AA_K^\times/K^\times$, which lets us consider the quotient $\AA_K^\times/K^\times$.

It turns out that $\AA_K^\times$ and $\AA_K^\times/K^\times$ are the right objects to study. For example, we have the following result.
\begin{theorem}[{\cite[Proposition~2.5]{milne-cft}}] \label{thm:idelecohom}
	Let $L/K$ be a finite Galois extension of global fields with Galois group $G\coloneqq\op{Gal}(L/K)$. Then the various restrictions define an isomorphism
	\[\widehat H^i(G,\AA_L^\times)\simeq\bigoplus_{u\in V_K}\widehat H^i(G,L_v^\times),\]
	for $i\ge0$, where the $v\in V_L$ is a chosen prime over each $u\in V_K$.
\end{theorem}
We also have a global invariant map.
\begin{theorem}[{\cite[p.~194]{global-cft}}]
	Let $L/K$ be a finite Galois extension of global fields of degree $n$ with Galois group $G\coloneqq\op{Gal}(L/K)$. Then there is a canonical map
	\[\op{inv}=\sum_{v\in V_L}\op{inv}_v\colon H^2(G,\AA_L^\times)\to\QQ/\ZZ\]
	induced by the local invariant maps and \autoref{thm:idelecohom}. This map induces an isomorphism
	\[\op{inv}\colon H^2(G,\AA_L^\times/L^\times)\to{\textstyle\frac1n}\ZZ/\ZZ.\]
\end{theorem}
As before, the canonical generator we chose will be of special interest.
\begin{definition}
	Let $L/K$ be a Galois extension of global fields of degree $n$ with Galois group $G$. Then the \textit{global fundamental class} $u_{L/K}$ is the class in $H^2\left(G,\AA_L^\times/L^\times\right)$ with
	\[\op{inv}u_{L/K}=1/n.\]
\end{definition}
And, for fun, here is our global Artin reciprocity map.
\begin{theorem}[{\cite[p.~197]{global-cft}}]
	Let $L/K$ be a Galois extension of global fields of degree $n$ with Galois group $G$. Then the map
	\[(u_{L/K}\cup-)\colon\widehat H^i(G,\ZZ)\to\widehat H^{i+2}\left(G,\AA_L^\times/L^\times\right)\]
	is an isomorphism for all $i\in\ZZ$.
\end{theorem}

\subsection{The Kottwitz Gerbs} \label{sec:globalsetup}
We quickly recall the construction of the Kottwitz gerbs $\mathcal E_1$, $\mathcal E_2$, and $\mathcal E_3$. Given a global field $K$, let $V_K$ denote the set of places of $K$. We follow \cite{kottwitz} and \cite{tate-torus}.

Fix a finite Galois extension of global fields $L/K$ with Galois group $G\coloneqq\op{Gal}(L/K)$. For later use, we will also let $G_v\subseteq G$ denote the decomposition group of a place $v\in V_L$. Now, we build two short exact sequences, as described in \autoref{sec:intro}. To begin, we note that the augmentation map $\ZZ[V_K]\onto\ZZ$ induces the short exact sequence
\[0\to\ZZ[V_L]_0\to\ZZ[V_L]\to\ZZ\to0\label{eq:sesx}\tag{$X$}\]
where $\ZZ[V_L]$ is the kernel of $\ZZ[V_L]\onto\ZZ$. We also have the short exact sequence
\[0\to L^\times\to\AA_L^\times\to\AA_L^\times/L^\times\to0\tag{$A$}\label{eq:sesa}\]
where the inclusion $L^\times\into\AA_L^\times$ is the diagonal one.

\subsubsection{Construction of \texorpdfstring{$\mc E_1$ and $\mc E_2$}{ E1 and E2}}
We now construct the Kottwitz gerbs one at a time. For $\mc E_1$, we let $\alpha_1(L/K)\in\widehat H^2\left(G,\op{Hom}_\ZZ(\ZZ,\AA_L^\times/L^\times)\right)$ denote the global fundamental class. Then we use the recipe from \autoref{thm:classifyextensionscohom} to construct the group extension
\[0\to\AA_L^\times/L^\times\to\mc E_1(L/K)\to G\to0.\]
This completes the construction of $\mc E_1(L/K)$, so we see that constructing $\mc E_1(L/K)$ is exactly as hard as constructing the global fundamental class.

To construct $\mc E_2$, let $\mathbb D_2\coloneqq\op{Hom}_\ZZ(\ZZ[V_L],-)$ denote the protorus with character group $\ZZ[V_L]$. Then $\mathcal E_2(L/K)$ is the Galois gerb associated to a particular class $\alpha_2\in\widehat H^2\left(G,\mathbb D(\mathbb A_L)\right)$. To construct this class, we need the following lemma.
\begin{lemma}[{\cite[p.~714]{tate-torus}}] \label{lem:magicaltate}
	Let $L/K$ be an extension of global fields with Galois group $G$, and let $V_L$ and $V_K$ denote the set of places of $L$ and $K$ respectively. Given a place $v\in V_L$, let $G_v\subseteq G$ denote its decomposition group. Then, for any $i\in\ZZ$,
	\[\widehat H^i(G,\op{Hom}_\ZZ(\ZZ[V_L],M))\simeq\prod_{u\in V_K}\widehat H^i(G_{v(u)},M),\]
	where the product is over places $u\in V_K$ taking a fixed place $v(u)\in V_L$ above $u$.
\end{lemma}
\begin{proof}
	We give the proof for later use. This is essentially a matter of separating our places and then applying Shapiro's lemma. For each $u\in V_K$, let $V_{u}\subseteq V_L$ denote the set of places in $L$ above $u$. Then we see
	\[\ZZ[V_L]\simeq\bigoplus_{u\in V_K}\ZZ[V_u]\]
	as $G$-modules because the $G$-orbit of a place $v\in V_L$ lying over a place $u\in V_K$ is exactly $V_u$. Thus, we have the isomorphisms
	\begin{align*}
		\widehat H^i(G,\op{Hom}_\ZZ(\ZZ[V_L],M)) &\simeq \widehat H^i\left(G,\op{Hom}_\ZZ\Bigg(\bigoplus_{u\in V_L}\ZZ[V_u],M\Bigg)\right) \\
		&\simeq \widehat H^i\left(G,\prod_{u\in V_K}\op{Hom}_\ZZ(\ZZ[V_u],M)\right) \\
		&\simeq \prod_{u\in V_K}\widehat H^i\left(G,\op{Hom}_\ZZ(\ZZ[V_u],M)\right).
	\end{align*}
	It remains to show that
	\[\widehat H^i\left(G,\op{Hom}_\ZZ(\ZZ[V_u],M)\right)\stackrel?\simeq\widehat H^i(G_{v(u)},M).\]
	Well, for each place $u\in V_K$, find a place $v(u)\in V_L$ above it. As discussed above, $V_u$ is a transitive $G$-set, and the stabilizer of $v(u)$ is $G_{v(u)}$. Thus, $V_u\simeq G_{v(u)}\backslash G$ as $G$-sets (note the distinction between left and right $G$-sets is somewhat irrelevant because $gG_v=G_vg$ for each $g\in G_v$), so $\ZZ[V_u]\simeq\ZZ[G_{v(u)}\backslash G]$ as $G$-modules. Thus, we may write
	\begin{align*}
		\widehat H^i\left(G,\op{Hom}_\ZZ(\ZZ[V_u],M)\right) &\simeq \widehat H^i\left(G,\op{Hom}_\ZZ(\ZZ[G_{v(u)}\backslash G],M)\right) \\
		&\simeq \widehat H^i\left(G,\op{Mor}_{\mathrm{Set}}(G_{v(u)}\backslash G,M)\right) \\
		&\simeq \widehat H^i\big(G,\op{CoInd}_{G_{v(u)}}^G(M)\big),
	\end{align*}
	where the last isomorphism is because $\op{Mor}_{\mathrm{Set}}(G_{v(u)}\backslash G,M)\simeq\op{CoInd}_H^G(M)$ by taking $f\colon G_{v(u)}\backslash G\to M$ to the function $g\mapsto gf\left(G_vg^{-1}\right)$. Now, this last cohomology group is isomorphic to $\widehat H^i(G_{v(u)},M)$ by Shapiro's lemma, thus finishing.
\end{proof}
\begin{remark} \label{rem:forwardshapiro}
	Tracking through the application of Shapiro's lemma above, we can see that the isomorphism behaves as
	\[\widehat H^i(G,\op{Hom}_\ZZ(\ZZ[V_L],M))\stackrel{\op{Res}}\to\widehat H^i(G_{v},\op{Hom}_\ZZ(\ZZ[V_L],M))\stackrel{\op{eval}_v}\to\widehat H^i(G_{v},M)\]
	on components; here $\op{eval}_v$ is induced by the evaluation-at-$v$ map $\op{Hom}_\ZZ(\ZZ[V_L],M)\to M$.
\end{remark}
Thus, to specify $\alpha_2\in\widehat H^2(G,\mathbb D_2(\AA_L))$, it is enough to specify a set of classes
\[\alpha_2(u)\in\widehat H^2\left(G_{v(u)},\AA_L^\times\right)\]
for each $u\in V_K$. To do so, we note that $G_{v(u)}=\op{Gal}(L_{v(u)}/K_u)$, so we use the natural embedding $i_v\colon L_v\into\AA_L^\times$ (for $u\in V_L$) to set
\[\alpha_2(u)\coloneqq i_{v(u)}\big(\alpha(L_{v(u)}/K_u)\big),\]
where $\alpha(L_{v(u)}/K_u)\in\widehat H^2\left(G_{v(u)},L_{v(u)}^\times\right)$ is the local fundamental class. Now, from $\alpha_2$, we construct $\mc E_2(L/K)$ again from \autoref{thm:classifyextensionscohom} as the extension
\[0\to\mathbb D_2(\AA_L^\times)\to\mc E_2(L/K)\to G\to0.\]
This completes the construction of $\mc E_2$.

\subsubsection{Constructing \texorpdfstring{$\mc E_3$}{ E3}}
Lastly, we construct $\mc E_3$. Roughly speaking, we note that the morphism of short exact sequences from \autoref{eq:sesx} and \autoref{eq:sesa} can be specified by commuting morphisms $\ZZ[V_L]\to\AA_L^\times$ and $\ZZ\to\AA_L^\times/L^\times$, inducing the last arrow as follows.
% https://q.uiver.app/?q=WzAsMTAsWzAsMCwiMCJdLFsxLDAsIlxcWlpbVl9MXV8wIl0sWzIsMCwiXFxaWltWX0xdIl0sWzMsMCwiXFxaWiJdLFs0LDAsIjAiXSxbMCwxLCIwIl0sWzEsMSwiTF5cXHRpbWVzIl0sWzIsMSwiXFxBQV9MXlxcdGltZXMiXSxbMywxLCJcXEFBX0xeXFx0aW1lcy9MXlxcdGltZXMiXSxbNCwxLCIwIl0sWzAsMV0sWzEsMl0sWzIsM10sWzMsNF0sWzUsNl0sWzYsN10sWzcsOF0sWzgsOV0sWzEsNiwiIiwxLHsic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoiZGFzaGVkIn19fV0sWzIsN10sWzMsOF1d&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
\[\begin{tikzcd}
	0 & {\ZZ[V_L]_0} & {\ZZ[V_L]} & \ZZ & 0 \\
	0 & {L^\times} & {\AA_L^\times} & {\AA_L^\times/L^\times} & 0
	\arrow[from=1-1, to=1-2]
	\arrow[from=1-2, to=1-3]
	\arrow[from=1-3, to=1-4]
	\arrow[from=1-4, to=1-5]
	\arrow[from=2-1, to=2-2]
	\arrow[from=2-2, to=2-3]
	\arrow[from=2-3, to=2-4]
	\arrow[from=2-4, to=2-5]
	\arrow[dashed, from=1-2, to=2-2]
	\arrow[from=1-3, to=2-3]
	\arrow[from=1-4, to=2-4]
\end{tikzcd}\]
Intuitively, this should let us specify a cohomology class $\alpha_3\in\widehat H^2\left(G,\op{Hom}_\ZZ(\ZZ[V_L]_0,L^\times)\right)$ from melding together $\alpha_1$ and $\alpha_2$.

To rigorize this, we let $\op{Hom}_\ZZ(X,A)$ denote the group of morphisms of short exact sequences from \autoref{eq:sesx} to \autoref{eq:sesa}; we let $\pi_1,\pi_2,\pi_3$ denote the projections from $\op{Hom}_\ZZ(X,A)$ to $\op{Hom}_\ZZ(\ZZ[V_L]_0,L^\times)$, to $\op{Hom}_\ZZ(\ZZ[V_L],\AA_L^\times)$, and to $\op{Hom}_\ZZ(\ZZ,\AA_L^\times/L^\times)$ respectively. Then the above argument tells us that
% https://q.uiver.app/?q=WzAsNCxbMCwwLCJcXG9we0hvbX1fXFxaWihYLEEpIl0sWzEsMCwiXFxvcHtIb219X1xcWlooXFxaWltWX0xdXzAsXFxBQV9MXlxcdGltZXMpIl0sWzAsMSwiXFxvcHtIb219X1xcWlooXFxaWixMXlxcdGltZXMpIl0sWzEsMSwiXFxvcHtIb219X1xcWlooXFxaWltWX0xdLFxcQUFfTF5cXHRpbWVzKSJdLFswLDEsIlxccGlfMiJdLFswLDIsIlxccGlfMyIsMl0sWzEsM10sWzIsM10sWzAsMywiIiwxLHsic3R5bGUiOnsibmFtZSI6ImNvcm5lciJ9fV1d&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
\[\begin{tikzcd}
	{\op{Hom}_\ZZ(X,A)} & {\op{Hom}_\ZZ(\ZZ[V_L]_0,\AA_L^\times)} \\
	{\op{Hom}_\ZZ(\ZZ,L^\times)} & {\op{Hom}_\ZZ(\ZZ[V_L],\AA_L^\times)}
	\arrow["{\pi_2}", from=1-1, to=1-2]
	\arrow["{\pi_3}"', from=1-1, to=2-1]
	\arrow[from=1-2, to=2-2]
	\arrow[from=2-1, to=2-2]
	\arrow["\lrcorner"{anchor=center, pos=0.125}, draw=none, from=1-1, to=2-2]
\end{tikzcd}\]
is a pull-back square. Then we can check via \autoref{lem:magicaltate} that $\widehat H^1(G,\op{Hom}_\ZZ(\ZZ[V_L],\AA_L^\times))=0$, which gives the following result.
\begin{lemma}[{\cite[p.~716]{tate-torus}, \cite[Lemma~6.3]{kottwitz}}] \label{lem:constructtatealpha}
	Fix everything as above. Then
	% https://q.uiver.app/?q=WzAsNCxbMCwwLCJcXHdpZGVoYXQgSF4yKEcsXFxvcHtIb219X1xcWlooWCxBKSkiXSxbMSwwLCJcXHdpZGVoYXQgSF4yKEcsXFxvcHtIb219X1xcWlooXFxaWltWX0xdXzAsXFxBQV9MXlxcdGltZXMpKSJdLFswLDEsIlxcd2lkZWhhdCBIXjIoRyxcXG9we0hvbX1fXFxaWihcXFpaLExeXFx0aW1lcykpIl0sWzEsMSwiXFx3aWRlaGF0IEheMihHLFxcb3B7SG9tfV9cXFpaKFxcWlpbVl9MXSxcXEFBX0xeXFx0aW1lcykpIl0sWzAsMSwiXFxwaV8yIl0sWzAsMiwiXFxwaV8zIiwyXSxbMSwzXSxbMiwzXSxbMCwzLCIiLDEseyJzdHlsZSI6eyJuYW1lIjoiY29ybmVyIn19XV0=&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	\[\begin{tikzcd}
		{\widehat H^2(G,\op{Hom}_\ZZ(X,A))} & {\widehat H^2(G,\op{Hom}_\ZZ(\ZZ[V_L]_0,\AA_L^\times))} \\
		{\widehat H^2(G,\op{Hom}_\ZZ(\ZZ,L^\times))} & {\widehat H^2(G,\op{Hom}_\ZZ(\ZZ[V_L],\AA_L^\times))}
		\arrow["{\pi_2}", from=1-1, to=1-2]
		\arrow["{\pi_3}"', from=1-1, to=2-1]
		\arrow[from=1-2, to=2-2]
		\arrow[from=2-1, to=2-2]
		\arrow["\lrcorner"{anchor=center, pos=0.125, rotate=45}, draw=none, from=1-1, to=2-2]
	\end{tikzcd}\]
	is a pull-back square.
\end{lemma} 
To finish, we merely have to check that $\alpha_2$ and $\alpha_1$ have the same image in $\widehat H^2(G,\op{Hom}_\ZZ(\ZZ[V_L],\AA_L^\times))$ so that \autoref{lem:constructtatealpha} promises us $\alpha\in\widehat H^2(G,\op{Hom}_\ZZ(X,A))$ such that $\pi_2\alpha=\alpha_2$ and $\pi_1\alpha=\alpha_1$. These together let us construct $\alpha_3\coloneqq\pi_3\alpha$ and hence $\mc E_3(L/K)$ from \autoref{thm:classifyextensionscohom} as the extension
\[0\to\mathbb D_3(L^\times)\to\mc E_3(L/K)\to G\to0,\]
where $\mathbb D_3\coloneqq\op{Hom}_\ZZ(\ZZ[V_L]_0,-)$.
\begin{remark}
	It is true that certain morphisms $f_2\colon\ZZ[V_L]\to\AA_L^\times$ induce a morphism $f_3\colon\ZZ[V_L]_0\to L^\times$ making
	% https://q.uiver.app/?q=WzAsNixbMCwwLCIwIl0sWzEsMCwiXFxaWltWX0xdXzAiXSxbMiwwLCJcXFpaW1ZfTF0iXSxbMCwxLCIwIl0sWzEsMSwiTF5cXHRpbWVzIl0sWzIsMSwiXFxBQV9MXlxcdGltZXMiXSxbMCwxXSxbMSwyLCJiJyJdLFszLDRdLFs0LDUsImEnIl0sWzEsNCwiZl8zIiwwLHsic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoiZGFzaGVkIn19fV0sWzIsNSwiZl8yIl1d&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	\[\begin{tikzcd}
		0 & {\ZZ[V_L]_0} & {\ZZ[V_L]} \\
		0 & {L^\times} & {\AA_L^\times}
		\arrow[from=1-1, to=1-2]
		\arrow["{b'}", from=1-2, to=1-3]
		\arrow[from=2-1, to=2-2]
		\arrow["{a'}", from=2-2, to=2-3]
		\arrow["{f_3}", dashed, from=1-2, to=2-2]
		\arrow["{f_2}", from=1-3, to=2-3]
	\end{tikzcd}\]
	commute by solving $a'f_3=f_2b'$ (when possible). However, it is not true that $\alpha_2$ uniquely determines $\alpha_3$ like this because the induced map
	\[a'\colon\widehat H^2(G,\op{Hom}_\ZZ(\ZZ[V_L]_0,L^\times))\to\widehat H^2(G,\op{Hom}_\ZZ(\ZZ[V_L]_0,\AA_L^\times))\]
	need not be injective in general, so knowing $a'\alpha_3=b'\alpha_2$ does not specify $\alpha_3$ in general.
\end{remark}